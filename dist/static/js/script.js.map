{"version":3,"sources":["global.js","header.js","menu.js","toggle.js","popup.js","select.js","autocomplete.js","form.js","alert.js","animation.js"],"names":["browser","elemIsHidden","ajax","animate","document","documentElement","setAttribute","navigator","userAgent","toLowerCase","test","CustomEvent","e","window","event","params","evt","createEvent","bubbles","cancelable","detail","undefined","initCustomEvent","prototype","Object","create","Event","winResizedEvent","winWidthResizedEvent","rsz","beginWidth","innerWidth","addEventListener","setTimeout","dispatchEvent","Element","closest","ElProto","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","selector","parentElement","elem","compStyle","getComputedStyle","display","visibility","opacity","options","xhr","XMLHttpRequest","open","url","send","setRequestHeader","onreadystatechange","readyState","status","success","response","error","draw","duration","ease","complete","start","performance","now","requestAnimationFrame","anim","time","timeFraction","easing","quad","Math","pow","MobNav","headerElem","getElementById","fixHeader","pageYOffset","classList","add","body","contains","remove","winScrollTop","fixBody","st","style","top","scrollTo","btnElem","headerId","close","openBtnElements","querySelectorAll","openBtn","i","length","init","openElem","target","preventDefault","closeBtn","closeLink","Menu","toggle","elementStr","subMenuStr","subMenuElem","querySelector","height","mainElem","itemElements","subMenuElements","scrollHeight","Toggle","toggledClass","onChange","toggleElem","state","targetElements","getAttribute","hasAttribute","dependenceTargetElements","off","innerHTML","onDocClickOff","onDocClickOffSelector","toggleElements","targetSelectors","toggleSelector","Popup","MediaPopup","onClose","headerSelector","offset","clientWidth","right","callback","elemParent","message","msg","elements","element","closeElem","location","hash","image","args","elemPopup","popupStr","elemImg","src","href","video","next","group","index","slice","call","indexOf","type","caption","Select","field","hideCssClass","onSelect","reset","parentElem","parElem","fieldElements","buttonElements","inputElements","valueElements","value","blur","optionsElements","listItemElements","opionsElem","scrollTop","selectMultipleVal","button","input","toButtonValue","toInputValue","inputsBlock","checkedElements","join","yetInput","createElement","name","appendChild","targetAction","targetElem","textInputElement","focus","selectVal","disabled","Placeholder","hide","Form","submitForm","varHeightTextarea","setHeight","ValidateForm","select","autocomplete","match","reg","RegExp","valueElem","setOptions","fieldSelector","optObj","nameKey","valKey","secValKey","optionsElem","li","secValAttr","keyboard","key","hoverItem","nextItem","item","nextElementSibling","getBoundingClientRect","firstElementChild","previousElementSibling","lastElementChild","build","parent","optionsList","selectedOption","opt","require","placeholder","submitOnChange","head","multiple","class","inpDiv","hiddenInp","customElem","className","insertBefore","firstChild","removeChild","children","valElem","arrElem","which","keyCode","AutoComplete","fieldElem","inputElem","valuesData","setValuesData","offsetHeight","getValues","preReg","values","dataVal","itemElem","keybinding","errorTip","err","errInd","errorTxt","errTip","customErrorTip","txt","num","date","errDate","compDate","Date","curDate","interval","valueOf","getFullYear","getMonth","getDate","email","tel","pass","minLng","checkbox","checked","radio","checkedElement","file","filesArr","errCount","ext","size","maxFiles","extRegExp","replace","maxSize","fileItemElements","validateOnInput","dataType","validate","formElem","groups","CustomFile","inputFiles","val","compElemVal","formSelector","mirror","mirrorOutput","NextFieldset","fwd","nextFieldset","currentFieldset","goTo","nextBtnSelector","prevBtnSelector","nextBtnElem","prevBtnElem","onSubmit","submit","clear","textareaMirrors","actSubmitBtn","removeAttribute","ret","obj","unlockSubmitButton","clearForm","ctrlKey","BindLabels","elementsStr","label","forID","id","htmlFor","DuplicateForm","modelElem","destElem","duplicatedDiv","dupicatedElements","dupicatedElem","labelElements","j","duplElem","addBtnSelector","removeBtnSelector","addBtnElem","removeBtnElem","Alert","alertIndex","alertId","showOnce","hiddenAlert","localStorage","getItem","alertElem","position","addClass","setContent","content","hidePermanently","setItem","animationOnVisible","animElements","scroll","winBotEdge","innerHeight","animElem","animElemOffsetTop","animElemOffsetBot"],"mappings":"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","file":"script.js","sourcesContent":["// global variables\r\n; var browser, elemIsHidden, ajax, animate;\r\n\r\n(function() {\r\n\t'use strict';\r\n\t\r\n\t// Get useragent\r\n\tdocument.documentElement.setAttribute('data-useragent', navigator.userAgent.toLowerCase());\r\n\t\r\n\t// Browser identify\r\n\tbrowser = (function(userAgent) {\r\n\t\tuserAgent = userAgent.toLowerCase();\r\n\t\t\r\n\t\tif (/(msie|rv:11\\.0)/.test(userAgent)) {\r\n\t\t\treturn 'ie';\r\n\t\t} else if (/firefox/.test(userAgent)) {\r\n\t\t\treturn 'ff';\r\n\t\t}\r\n\t})(navigator.userAgent);\r\n\t\r\n\t// Add support CustomEvent constructor for IE\r\n\ttry {\r\n\t\tnew CustomEvent(\"IE has CustomEvent, but doesn't support constructor\");\r\n\t} catch (e) {\r\n\t\twindow.CustomEvent = function(event, params) {\r\n\t\t\tvar evt = document.createEvent(\"CustomEvent\");\r\n\r\n\t\t\tparams = params || {\r\n\t\t\t\tbubbles: false,\r\n\t\t\t\tcancelable: false,\r\n\t\t\t\tdetail: undefined\r\n\t\t\t};\r\n\r\n\t\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n\t\t\t\r\n\t\t\treturn evt;\r\n\t\t}\r\n\t\t\r\n\t\tCustomEvent.prototype = Object.create(window.Event.prototype);\r\n\t}\r\n\t\r\n\t// Window Resized Event\r\n\tconst winResizedEvent = new CustomEvent('winResized'),\r\n\twinWidthResizedEvent = new CustomEvent('winWidthResized');\r\n\r\n\tlet rsz = true,\r\n\tbeginWidth = window.innerWidth;\r\n\t\r\n\twindow.addEventListener('resize', function() {\r\n\t\tif (rsz) {\r\n\t\t\trsz = false;\r\n\t\t\t\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\twindow.dispatchEvent(winResizedEvent);\r\n\t\t\t\t\r\n\t\t\t\tif (beginWidth != window.innerWidth) {\r\n\t\t\t\t\twindow.dispatchEvent(winWidthResizedEvent);\r\n\r\n\t\t\t\t\tbeginWidth = window.innerWidth\r\n\t\t\t\t}\r\n\r\n\t\t\t\trsz = true;\r\n\t\t\t}, 1021);\r\n\t\t}\r\n\t});\r\n\t\r\n\t// Closest polyfill\r\n\tif (!Element.prototype.closest) {\r\n\t\t(function(ElProto) {\r\n\t\t\tElProto.matches = ElProto.matches || ElProto.mozMatchesSelector || ElProto.msMatchesSelector || ElProto.oMatchesSelector || ElProto.webkitMatchesSelector;\r\n\t\t\t\r\n\t\t\tElProto.closest = ElProto.closest || function closest(selector) {\r\n\t\t\t\tif (!this) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.matches(selector)) {\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!this.parentElement) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.parentElement.closest(selector);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t})(Element.prototype);\r\n\t}\r\n\t\r\n\t// Check element for hidden\r\n\telemIsHidden = function(elem) {\r\n\t\twhile (elem) {\r\n\t\t\tif (!elem) break;\r\n\t\t\t\r\n\t\t\tconst compStyle = getComputedStyle(elem);\r\n\t\t\t\r\n\t\t\tif (compStyle.display == 'none' || compStyle.visibility == 'hidden' || compStyle.opacity == '0') return true;\r\n\t\t\t\r\n\t\t\telem = elem.parentElement;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// Ajax\r\n\tajax = function(options) {\r\n\t\tconst xhr = new XMLHttpRequest();\r\n\t\t\r\n\t\txhr.open('POST', options.url);\r\n\t\t\r\n\t\tif (typeof options.send == 'string') {\r\n\t\t\txhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n\t\t}\r\n\t\t\r\n\t\txhr.onreadystatechange = function() {\r\n\t\t\tif (xhr.readyState == 4 && xhr.status == 200) {\r\n\t\t\t\toptions.success(xhr.response);\r\n\t\t\t} else if (xhr.readyState == 4 && xhr.status != 200) {\r\n\t\t\t\toptions.error(xhr.response);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\txhr.send(options.send);\r\n\t}\r\n\t\r\n\t/*\r\n\tAnimation\r\n\tanimate(function(takes 0...1) {}, Int duration in ms[, Str easing[, Fun animation complete]]);\r\n\t*/\r\n\tanimate = function(draw, duration, ease, complete) {\r\n\t\tconst start = performance.now();\r\n\t\t\r\n\t\trequestAnimationFrame(function anim(time) {\r\n\t\t\tlet timeFraction = (time - start) / duration;\r\n\t\t\t\r\n\t\t\tif (timeFraction > 1) {\r\n\t\t\t\ttimeFraction = 1;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdraw((ease) ? easing(timeFraction, ease) : timeFraction);\r\n\t\t\t\r\n\t\t\tif (timeFraction < 1) {\r\n\t\t\t\trequestAnimationFrame(anim);\r\n\t\t\t} else {\r\n\t\t\t\tif (complete !== undefined) {\r\n\t\t\t\t\tcomplete();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction easing(timeFraction, ease) {\r\n\t\tswitch (ease) {\r\n\t\t\tcase 'easeInQuad':\r\n\t\t\treturn quad(timeFraction);\r\n\t\t\t\r\n\t\t\tcase 'easeOutQuad':\r\n\t\t\treturn 1 - quad(1 - timeFraction);\r\n\t\t\t\r\n\t\t\tcase 'easeInOutQuad':\r\n\t\t\tif (timeFraction <= 0.5) {\r\n\t\t\t\treturn quad(2 * timeFraction) / 2;\r\n\t\t\t} else {\r\n\t\t\t\treturn (2 - quad(2 * (1 - timeFraction))) / 2;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction quad(timeFraction) {\r\n\t\treturn Math.pow(timeFraction, 2)\r\n\t}\r\n})();","/* \r\n\tMobNav.init({\r\n\t\topenBtn: '.js-open-menu',\r\n\t\tcloseBtn: '.js-close-menu',\r\n\t\theaderId: 'header',\r\n\t\tcloseLink: '.menu a.js-anchor'\r\n\t});\r\n*/\r\n\r\n; var MobNav;\r\n\r\n(function () {\r\n\t'use strict';\r\n\r\n\t// fix header\r\n\tconst headerElem = document.getElementById('header');\r\n\r\n\tfunction fixHeader() {\r\n\t\tif (window.pageYOffset > 21) {\r\n\t\t\theaderElem.classList.add('header_fixed');\r\n\t\t} else if (!document.body.classList.contains('popup-is-opened') && !document.body.classList.contains('mob-nav-is-opened')) {\r\n\t\t\theaderElem.classList.remove('header_fixed');\r\n\t\t}\r\n\t}\r\n\r\n\tfixHeader();\r\n\r\n\twindow.addEventListener('scroll', fixHeader);\r\n\r\n\t//mob menu\r\n\tMobNav = {\r\n\t\toptions: null,\r\n\t\twinScrollTop: 0,\r\n\r\n\t\tfixBody: function (st) {\r\n\t\t\tif (st) {\r\n\t\t\t\tthis.winScrollTop = window.pageYOffset;\r\n\r\n\t\t\t\tdocument.body.classList.add('mob-nav-is-opened');\r\n\t\t\t\tdocument.body.style.top = -this.winScrollTop + 'px';\r\n\t\t\t} else {\r\n\t\t\t\tdocument.body.classList.remove('mob-nav-is-opened');\r\n\r\n\t\t\t\tif (this.winScrollTop > 0) {\r\n\t\t\t\t\twindow.scrollTo(0, this.winScrollTop);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\topen: function (btnElem) {\r\n\t\t\tvar headerElem = document.getElementById(this.options.headerId);\r\n\r\n\t\t\tif (!headerElem) return;\r\n\r\n\t\t\tif (btnElem.classList.contains('opened')) {\r\n\t\t\t\tthis.close();\r\n\t\t\t} else {\r\n\t\t\t\tbtnElem.classList.add('opened');\r\n\t\t\t\theaderElem.classList.add('opened');\r\n\t\t\t\tthis.fixBody(true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function () {\r\n\t\t\tvar headerElem = document.getElementById(this.options.headerId);\r\n\r\n\t\t\tif (!headerElem) return;\r\n\r\n\t\t\theaderElem.classList.remove('opened');\r\n\r\n\t\t\tvar openBtnElements = document.querySelectorAll(this.options.openBtn);\r\n\r\n\t\t\tfor (var i = 0; i < openBtnElements.length; i++) {\r\n\t\t\t\topenBtnElements[i].classList.remove('opened');\r\n\t\t\t}\r\n\r\n\t\t\tthis.fixBody(false);\r\n\t\t},\r\n\r\n\t\tinit: function (options) {\r\n\t\t\tthis.options = options;\r\n\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tconst openElem = e.target.closest(options.openBtn);\r\n\r\n\t\t\t\tif (openElem) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tthis.open(openElem);\r\n\t\t\t\t} else if (e.target.closest(options.closeBtn)) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t} else if (e.target.closest(options.closeLink)) {\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})();","/*\r\n* call Menu.init(Str menu item selector, Str sub menu selector);\r\n*/\r\nvar Menu;\r\n\r\n(function() {\r\n\t'use strict';\r\n\r\n\tMenu = {\r\n\t\ttoggle: function(elem, elementStr, subMenuStr) {\r\n\t\t\tvar subMenuElem = elem.querySelector(subMenuStr);\r\n\r\n\t\t\tif (!subMenuElem) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (elem.classList.contains('active')) {\r\n\t\t\t\tsubMenuElem.style.height = 0;\r\n\r\n\t\t\t\telem.classList.remove('active');\r\n\t\t\t} else {\r\n\t\t\t\tvar mainElem = elem.closest('.menu'),\r\n\t\t\t\titemElements = mainElem.querySelectorAll(elementStr),\r\n\t\t\t\tsubMenuElements = mainElem.querySelectorAll(subMenuStr);\r\n\r\n\t\t\t\tfor (var i = 0; i < itemElements.length; i++) {\r\n\t\t\t\t\titemElements[i].classList.remove('accord__button_active');\r\n\t\t\t\t\tsubMenuElements[i].style.height = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsubMenuElem.style.height = subMenuElem.scrollHeight +'px';\r\n\r\n\t\t\t\telem.classList.add('active');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinit: function(elementStr, subMenuStr) {\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar elem = e.target.closest(elementStr);\r\n\r\n\t\t\t\tif (!elem) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.toggle(elem, elementStr, subMenuStr);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})();","/*\r\nToggle.init(Str toggleSelector[, onDocClickToggleOffSelecor[, Str toggledClass (default - 'toggled')]]);\r\n\r\nToggle.onChange = function(toggleElem, state) {\r\n\t// code...\r\n}\r\n*/\r\n\r\n; var Toggle;\r\n\r\n(function() {\r\n\t'use strict';\r\n\t\r\n\tToggle = {\r\n\t\ttoggledClass: 'toggled',\r\n\t\tonChange: null,\r\n\t\t\r\n\t\ttarget: function(toggleElem, state) {\r\n\t\t\tvar targetElements = document.querySelectorAll(toggleElem.getAttribute('data-target-elements'));\r\n\t\t\t\r\n\t\t\tif (!targetElements.length) return;\r\n\t\t\t\r\n\t\t\tif (state) {\r\n\t\t\t\tfor (var i = 0; i < targetElements.length; i++) {\r\n\t\t\t\t\ttargetElements[i].classList.add(this.toggledClass);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//dependence elements\r\n\t\t\t\tif (toggleElem.hasAttribute('data-dependence-target-elements')) {\r\n\t\t\t\t\tvar dependenceTargetElements = document.querySelectorAll(toggleElem.getAttribute('data-dependence-target-elements'));\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < dependenceTargetElements.length; i++) {\r\n\t\t\t\t\t\tdependenceTargetElements[i].classList.remove(this.toggledClass);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var i = 0; i < targetElements.length; i++) {\r\n\t\t\t\t\ttargetElements[i].classList.remove(this.toggledClass);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\ttoggle: function(toggleElem, off) {\r\n\t\t\tvar state;\r\n\t\t\t\r\n\t\t\tif (toggleElem.classList.contains(this.toggledClass)) {\r\n\t\t\t\ttoggleElem.classList.remove(this.toggledClass);\r\n\t\t\t\t\r\n\t\t\t\tstate = false;\r\n\t\t\t\t\r\n\t\t\t\tif (toggleElem.hasAttribute('data-first-text')) {\r\n\t\t\t\t\ttoggleElem.innerHTML = toggleElem.getAttribute('data-first-text');\r\n\t\t\t\t}\r\n\t\t\t} else if (!off) {\r\n\t\t\t\ttoggleElem.classList.add(this.toggledClass);\r\n\t\t\t\t\r\n\t\t\t\tstate = true;\r\n\t\t\t\t\r\n\t\t\t\tif (toggleElem.hasAttribute('data-second-text')) {\r\n\t\t\t\t\ttoggleElem.setAttribute('data-first-text', toggleElem.innerHTML);\r\n\t\t\t\t\t\r\n\t\t\t\t\ttoggleElem.innerHTML = toggleElem.getAttribute('data-second-text');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//target\r\n\t\t\tif (toggleElem.hasAttribute('data-target-elements')) {\r\n\t\t\t\tthis.target(toggleElem, state);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//call onChange\r\n\t\t\tif (this.onChange) {\r\n\t\t\t\tthis.onChange(toggleElem, state);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tonDocClickOff: function (e, onDocClickOffSelector) {\r\n\t\t\tvar toggleElements = document.querySelectorAll(onDocClickOffSelector + '.' +this.toggledClass);\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < toggleElements.length; i++) {\r\n\t\t\t\tvar elem = toggleElements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (elem.hasAttribute('data-target-elements')) {\r\n\t\t\t\t\tvar targetSelectors = elem.getAttribute('data-target-elements');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!e.target.closest(targetSelectors)) {\r\n\t\t\t\t\t\tthis.toggle(elem, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function(toggleSelector, onDocClickOffSelector, toggledClass) {\r\n\t\t\tif (toggledClass) {\r\n\t\t\t\tthis.toggledClass = toggledClass;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar toggleElem = e.target.closest(toggleSelector);\r\n\t\t\t\t\r\n\t\t\t\tif (toggleElem) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.toggle(toggleElem);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.onDocClickOff(e, onDocClickOffSelector);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})();","var Popup, MediaPopup;\r\n\r\n(function() {\r\n\t'use strict';\r\n\r\n\t//popup core\r\n\tPopup = {\r\n\t\twinScrollTop: 0,\r\n\t\tonClose: null,\r\n\t\theaderSelector: '.header',\r\n\r\n\t\tfixBody: function(st) {\r\n\t\t\tvar headerElem = document.querySelector(this.headerSelector);\r\n\r\n\t\t\tif (st && !document.body.classList.contains('popup-is-opened')) {\r\n\t\t\t\tthis.winScrollTop = window.pageYOffset;\r\n\r\n\t\t\t\tvar offset = window.innerWidth - document.documentElement.clientWidth;\r\n\r\n\t\t\t\tdocument.body.classList.add('popup-is-opened');\r\n\r\n\t\t\t\tif (headerElem) {\r\n\t\t\t\t\theaderElem.style.right = offset +'px';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdocument.body.style.right = offset +'px';\r\n\r\n\t\t\t\tdocument.body.style.top = (-this.winScrollTop) +'px';\r\n\t\t\t} else if (!st) {\r\n\t\t\t\tif (headerElem) {\r\n\t\t\t\t\theaderElem.style.right = '';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdocument.body.classList.remove('popup-is-opened');\r\n\r\n\t\t\t\twindow.scrollTo(0, this.winScrollTop);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\topen: function(elementStr, callback) {\r\n\t\t\tvar elem = document.querySelector(elementStr);\r\n\r\n\t\t\tif (!elem || !elem.classList.contains('popup__window')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.close();\r\n\r\n\t\t\tvar elemParent = elem.parentElement;\r\n\t\t\t\r\n\t\t\telemParent.classList.add('popup_visible');\r\n\r\n\t\t\telem.classList.add('popup__window_visible');\r\n\r\n\t\t\tif (callback) {\r\n\t\t\t\tthis.onClose = callback;\r\n\t\t\t}\r\n\r\n\t\t\tthis.fixBody(true);\r\n\r\n\t\t\treturn elem;\r\n\t\t},\r\n\r\n\t\tmessage: function(elementStr, msg, callback) {\r\n\t\t\tvar elem = this.open(elementStr, callback);\r\n\r\n\t\t\telem.querySelector('.popup__inner').innerHTML = '<div class=\"popup__message\">'+ msg +'</div>';\r\n\t\t},\r\n\r\n\t\tclose: function() {\r\n\t\t\tvar elements = document.querySelectorAll('.popup__window');\r\n\r\n\t\t\tif (!elements.length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\r\n\t\t\t\tif (!elem.classList.contains('popup__window_visible')) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\telem.classList.remove('popup__window_visible');\r\n\t\t\t\telem.parentElement.classList.remove('popup_visible');\r\n\t\t\t}\r\n\r\n\t\t\tif (this.onClose) {\r\n\t\t\t\tthis.onClose();\r\n\t\t\t\tthis.onClose = null;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinit: function(elementStr) {\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar element = e.target.closest(elementStr),\r\n\t\t\t\tcloseElem = e.target.closest('.js-popup-close');\r\n\r\n\t\t\t\tif (element) {\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tthis.open(element.getAttribute('data-popup'));\r\n\t\t\t\t} else if (closeElem || (!e.target.closest('.popup__window') && e.target.closest('.popup'))) {\r\n\t\t\t\t\tthis.fixBody(false);\r\n\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (window.location.hash) {\r\n\t\t\t\tthis.open(window.location.hash);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t//popup media\r\n\tMediaPopup = {\r\n\t\timage: function(args) {\r\n\t\t\tvar elemPopup = Popup.open(args.popupStr),\r\n\t\t\telemImg = elemPopup.querySelector('.popup-media__image');\r\n\r\n\t\t\tPopup.onClose = function() {\r\n\t\t\t\telemImg.src = '#';\r\n\t\t\t\telemImg.classList.remove('popup-media__image_visible'); \r\n\t\t\t}\r\n\r\n\t\t\telemImg.src = args.href;\r\n\t\t\telemImg.classList.add('popup-media__image_visible');\r\n\t\t\t\r\n\t\t},\r\n\r\n\t\tvideo: function(args) {\r\n\r\n\t\t},\r\n\r\n\t\tnext: function(elem) {\r\n\t\t\tif (!elem.hasAttribute('data-group')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar group = elem.getAttribute('data-group'),\r\n\t\t\tindex = [].slice.call(document.querySelectorAll('[data-group=\"'+ group +'\"]')).indexOf(elem);\r\n\t\t},\r\n\r\n\t\tinit: function(elementStr) {\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar element = e.target.closest(elementStr);\r\n\r\n\t\t\t\tif (!element) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tvar type = element.getAttribute('data-type'),\r\n\t\t\t\targs = {\r\n\t\t\t\t\thref: element.href,\r\n\t\t\t\t\tcaption: element.getAttribute('data-caption'),\r\n\t\t\t\t\tgroup: element.getAttribute('data-group'),\r\n\t\t\t\t\tpopupStr: element.getAttribute('data-popup')\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (type == 'image') {\r\n\t\t\t\t\tthis.image(args);\r\n\t\t\t\t} else if (type == 'video') {\r\n\t\t\t\t\tthis.video(args);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.next(element);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n})();\r\n\r\n\r\n\r\n/*var pPopup = {\r\n\tcloseCallback: function() {},\r\n\tplay: null,\r\n\tind: 0,\r\n\tgroup: null,\r\n\tposition: 0,\r\n\r\n\tshow: function(id, fun) {\r\n\t\tvar _ = this,\r\n\t\t$popWin = $(id),\r\n\t\t$popup = $popWin.closest('.popup');\r\n\t\t\r\n\t\tif ($popWin.length && $popWin.hasClass('popup__window')) {\r\n\r\n\t\t\t_.position = $(window).scrollTop();\r\n\t\t\t$popup.fadeIn(321).scrollTop(0);\r\n\t\t\t$('.popup__window').removeClass('popup__window_visible');\r\n\t\t\t$popWin.addClass('popup__window_visible');\r\n\t\t\t$('body').css('top', -_.position).addClass('is-popup-opened');\r\n\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tCoverImg.reInit('#media-popup');\r\n\t\t\t}, 721);\r\n\r\n\t\t}\r\n\r\n\t\t_.closeCallback = fun || function() {};\r\n\t},\r\n\r\n\thide: function() {\r\n\t\tvar _ = this;\r\n\t\t$('.popup__window').removeClass('popup__window_visible');\r\n\t\t$('.popup').fadeOut(321);\r\n\t\t$('.popup__message').remove();\r\n\t\t$('body').removeClass('is-popup-opened').removeAttr('style');\r\n\t\t$('html, body').scrollTop(_.position);\r\n\t\t_.closeCallback();\r\n\t},\r\n\r\n\tmessage: function(id,msg,fun) {\r\n\t\tvar _ = this;\r\n\t\t$(id).find('.popup__inner').prepend('<div class=\"popup__message\">'+ msg +'</div>');\r\n\t\t_.show(id);\r\n\t\t_.closeCallback = fun || function() {};\r\n\t},\r\n\r\n\tresize: function($pop, $img) {\r\n\t\tvar popH = $pop.innerHeight();\r\n\t\tif (popH > window.innerHeight) {\r\n\t\t\t$pop.css('max-width', (window.innerHeight * ($pop.innerWidth() / popH)));\r\n\t\t}\r\n\t},\r\n\r\n\tmedia: function(_$,args,show) {\r\n\t\tvar _ = this,\r\n\t\tid = $(_$).attr('data-popup'),\r\n\t\tPop = $(id),\r\n\t\t$box = Pop.find('.popup-media__box'),\r\n\t\tImg = Pop.find('.popup-media__image'),\r\n\t\tBtnPlay = Pop.find('.popup-media__play'),\r\n\t\tIframe = Pop.find('.popup-media__iframe');\r\n\r\n\t\tif (args.data) {\r\n\t\t\tPop.find('.popup-media__bar').css('display', 'block');\r\n\t\t\tvar data = JSON.parse( args.data );\r\n\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\tPop.find('.popup-media__data-'+ i).html(data[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (args.imgSize) {\r\n\t\t\tvar imgSize = JSON.parse(args.imgSize);\r\n\t\t\tImg.attr('width', imgSize[0]).attr('height', imgSize[1]);\r\n\t\t} else {\r\n\t\t\tImg.attr('width', '').attr('height', '');\r\n\t\t}\r\n\r\n\t\tif (args.img) {\r\n\t\t\tImg.css({visibility: 'visible', marginLeft: '', marginTop: ''}).removeClass('cover-img_w cover-img_h').attr('src', args.img);\r\n\t\t}\r\n\t\t\r\n\t\t//Pop.css('max-width', '');\r\n\t\tIframe.css('visibility', 'hidden').attr('src', '');\r\n\t\tBtnPlay.css('visibility', 'hidden');\r\n\t\t\r\n\t\tif (args.vid) {\r\n\t\t\t$box.removeClass('middle').addClass('cover-img-wrap');\r\n\t\t\tImg.removeClass('middle__img').addClass('cover-img');\r\n\t\t\tBtnPlay.css('visibility', 'visible').attr('href', args.vid);\r\n\r\n\t\t\t_.play = function() {\r\n\t\t\t\tvar utm = args.vid.match(/(?:youtu\\.be\\/|youtube\\.com\\/watch\\?v\\=|youtube\\.com\\/embed\\/)+?([\\w-]+)/i),\r\n\t\t\t\tifrSrc = 'https://www.youtube.com/embed/'+ utm[1] +'?autoplay=1';\r\n\t\t\t\tBtnPlay.css('visibility', 'hidden');\r\n\t\t\t\tImg.css('visibility', 'hidden');\r\n\t\t\t\tIframe.css('visibility', 'visible').attr('src', ifrSrc);\r\n\t\t\t}\r\n\r\n\t\t\tif (!args.img) {\r\n\t\t\t\t_.play();\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tCoverImg.init(id);\r\n\t\t\t\t\tImg.attr('src', args.img);\r\n\t\t\t\t}, 721);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t} else {\r\n\t\t\t$box.removeClass('cover-img-wrap').addClass('middle');\r\n\t\t\tImg.removeClass('cover-img').addClass('middle__img');\r\n\t\t}\r\n\r\n\r\n\r\n\t\tif (args.group) {\r\n\t\t\tPop.find('.popup-media__arr').css('display', 'block');\r\n\t\t\t_.group =  $(_$).attr('data-group');\r\n\t\t\t_.ind = $('[data-group=\"'+ _.group +'\"]').index(_$);\r\n\t\t}\r\n\r\n\t\tif (show) {\r\n\t\t\t_.show(id);\r\n\t\t}\r\n\r\n\t\tif (!args.vid) {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t_.resize(Pop, Img);\r\n\t\t\t}, 721);\r\n\t\t}\r\n\r\n\t\t_.closeCallback = function() {\r\n\t\t\tImg.css('visibility', 'hidden').attr('src', '');\r\n\t\t\tIframe.css('visibility', 'hidden').attr('src', '');\r\n\t\t\tBtnPlay.css('visibility', 'hidden');\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnext: function(dir) {\r\n\t\tvar _ = this,\r\n\t\t$next,\r\n\t\tind = _.ind;\r\n\r\n\t\tif (dir == 'next') {\r\n\t\t\tind++;\r\n\t\t\tif ($('[data-group=\"'+ _.group +'\"]').eq(ind).length) {\r\n\t\t\t\t$next = $('[data-group=\"'+ _.group +'\"]').eq(ind);\r\n\t\t\t}\r\n\t\t} else if (dir == 'prev' && ind > 0) {\r\n\t\t\tind--;\r\n\t\t\tif ($('[data-group=\"'+ _.group +'\"]').eq(ind).length) {\r\n\t\t\t\t$next = $('[data-group=\"'+ _.group +'\"]').eq(ind);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($next) {\r\n\t\t\tvar args;\r\n\r\n\t\t\tif ($next.hasClass('js-open-popup-image')) {\r\n\t\t\t\targs = {\r\n\t\t\t\t\timg: $next.attr('href'),\r\n\t\t\t\t\timgSize: $next.attr('data-image-size'),\r\n\t\t\t\t\tgroup: $next.attr('data-group'),\r\n\t\t\t\t\tdata: $next.attr('data-data')\r\n\t\t\t\t};\r\n\t\t\t} else if ($next.hasClass('js-open-popup-video')) {\r\n\t\t\t\targs = {\r\n\t\t\t\t\tvid: $next.attr('href'),\r\n\t\t\t\t\timg: $next.attr('data-preview'),\r\n\t\t\t\t\timgSize: $next.attr('data-preview-size'),\r\n\t\t\t\t\tgroup: $next.attr('data-group'),\r\n\t\t\t\t\tdata: $next.attr('data-data')\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t_.media($next, args);\r\n\t\t\t\r\n\t\t}\r\n\r\n\t}\r\n\r\n};*/\r\n\r\n\r\n/*$(document).ready(function() {\r\n\t$('body').on('click', '.js-open-popup', function () {\r\n\t\tPopup.show($(this).attr('data-popup'));\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.js-open-popup-image', function () {\r\n\t\tvar args = {\r\n\t\t\timg: $(this).attr('href'),\r\n\t\t\timgSize: $(this).attr('data-image-size'),\r\n\t\t\tgroup: $(this).attr('data-group'),\r\n\t\t\tdata: $(this).attr('data-data')\r\n\t\t};\r\n\t\tPopup.media(this, args, true);\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.js-open-popup-video', function () {\r\n\t\tvar args = {\r\n\t\t\tvid: $(this).attr('href'),\r\n\t\t\timg: $(this).attr('data-preview'),\r\n\t\t\timgSize: $(this).attr('data-preview-size'),\r\n\t\t\tgroup: $(this).attr('data-group'),\r\n\t\t\tdata: $(this).attr('data-data')\r\n\t\t};\r\n\t\tPopup.media(this, args, true);\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.popup-media__play', function () {\r\n\t\tPopup.play();\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.popup-media__arr', function () {\r\n\t\tPopup.next($(this).attr('data-dir'));\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.js-open-msg-popup', function () {\r\n\t\tPopup.message('#message-popup', 'Это всплывашка с сообщением.<br> вызов: <span class=\"c-red\">Popup.message(\"#id\", \"Текст или html\");</span>', function() { alert('После закрытия'); });\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.popup__close', function () {\r\n\t\tPopup.hide();\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.popup', function(e) {\r\n\t\tif (!$(e.target).closest('.popup__window').length) {\r\n\t\t\tPopup.hide();\r\n\t\t}\r\n\t});\r\n\r\n\r\n\tif (window.location.hash) {\r\n\t\tvar hash = window.location.hash;\r\n\t\tif($(hash).length && $(hash).hasClass('popup__window')){\r\n\t\t\tPopup.show(hash);\r\n\t\t}\r\n\t}\r\n\r\n});*/","; var Select;\r\n\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\t// custom select\r\n\tSelect = {\r\n\t\tfield: null,\r\n\t\thideCssClass: 'hidden',\r\n\t\tonSelect: null,\r\n\t\t\r\n\t\treset: function (parentElem) {\r\n\t\t\tvar parElem = parentElem || document, \r\n\t\t\tfieldElements = parElem.querySelectorAll('.custom-select'),\r\n\t\t\tbuttonElements = parElem.querySelectorAll('.custom-select__button'),\r\n\t\t\tinputElements = parElem.querySelectorAll('.custom-select__input'),\r\n\t\t\tvalueElements = parElem.querySelectorAll('.custom-select__val');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < fieldElements.length; i++) {\r\n\t\t\t\tfieldElements[i].classList.remove('custom-select_changed');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < buttonElements.length; i++) {\r\n\t\t\t\tbuttonElements[i].innerHTML = buttonElements[i].getAttribute('data-placeholder');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < inputElements.length; i++) {\r\n\t\t\t\tinputElements[i].value = '';\r\n\t\t\t\tinputElements[i].blur();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < valueElements.length; i++) {\r\n\t\t\t\tvalueElements[i].classList.remove('custom-select__val_checked');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tclose: function () {\r\n\t\t\tvar fieldElements = document.querySelectorAll('.custom-select'),\r\n\t\t\toptionsElements = document.querySelectorAll('.custom-select__options');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < fieldElements.length; i++) {\r\n\t\t\t\tfieldElements[i].classList.remove('custom-select_opened');\r\n\t\t\t\toptionsElements[i].classList.remove('ovfauto');\r\n\t\t\t\toptionsElements[i].style.height = 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar listItemElements = document.querySelectorAll('.custom-select__options li');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < listItemElements.length; i++) {\r\n\t\t\t\tlistItemElements[i].classList.remove('hover');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\topen: function () {\r\n\t\t\tthis.field.classList.add('custom-select_opened');\r\n\t\t\t\r\n\t\t\tvar opionsElem = this.field.querySelector('.custom-select__options');\r\n\t\t\t\r\n\t\t\topionsElem.style.height = (opionsElem.scrollHeight + 2) +'px';\r\n\t\t\t\r\n\t\t\topionsElem.scrollTop = 0;\r\n\t\t\t\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\topionsElem.classList.add('ovfauto');\r\n\t\t\t}, 550);\r\n\t\t},\r\n\t\t\r\n\t\tselectMultipleVal: function (elem, button, input) {\r\n\t\t\tvar toButtonValue = [],\r\n\t\t\ttoInputValue = [],\r\n\t\t\tinputsBlock = this.field.querySelector('.custom-select__multiple-inputs');\r\n\t\t\t\r\n\t\t\telem.classList.toggle('custom-select__val_checked');\r\n\t\t\t\r\n\t\t\tvar checkedElements = this.field.querySelectorAll('.custom-select__val_checked');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < checkedElements.length; i++) {\r\n\t\t\t\tvar elem = checkedElements[i];\r\n\t\t\t\t\r\n\t\t\t\ttoButtonValue[i] = elem.innerHTML;\r\n\t\t\t\ttoInputValue[i] = (elem.hasAttribute('data-value')) ? elem.getAttribute('data-value') : elem.innerHTML;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (toButtonValue.length) {\r\n\t\t\t\tbutton.innerHTML = toButtonValue.join(', ');\r\n\t\t\t\t\r\n\t\t\t\tinput.value = toInputValue[0];\r\n\t\t\t\t\r\n\t\t\t\tinputsBlock.innerHTML = '';\r\n\t\t\t\t\r\n\t\t\t\tif (toInputValue.length > 1) {\r\n\t\t\t\t\tfor (var i = 1; i < toInputValue.length; i++) {\r\n\t\t\t\t\t\tvar yetInput = document.createElement('input');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tyetInput.type = 'hidden';\r\n\t\t\t\t\t\tyetInput.name = input.name;\r\n\t\t\t\t\t\tyetInput.value = toInputValue[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tinputsBlock.appendChild(yetInput);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tbutton.innerHTML = button.getAttribute('data-placeholder');\r\n\t\t\t\tinput.value = '';\r\n\t\t\t\tthis.close();\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\ttargetAction: function () {\r\n\t\t\tvar elements = this.field.querySelectorAll('.custom-select__val');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (!elem.hasAttribute('data-target-elements')) continue;\r\n\t\t\t\t\r\n\t\t\t\tvar targetElem = document.querySelector(elem.getAttribute('data-target-elements'));\r\n\t\t\t\t\r\n\t\t\t\tif (elem.classList.contains('custom-select__val_checked')) {\r\n\t\t\t\t\ttargetElem.style.display = 'block';\r\n\t\t\t\t\ttargetElem.classList.remove(this.hideCssClass);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar textInputElement = targetElem.querySelector('input[type=\"text\"]');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (textInputElement) {\r\n\t\t\t\t\t\ttextInputElement.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttargetElem.style.display = 'none';\r\n\t\t\t\t\ttargetElem.classList.add(this.hideCssClass);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tselectVal: function (elem) {\r\n\t\t\tvar button = this.field.querySelector('.custom-select__button'),\r\n\t\t\tinput = this.field.querySelector('.custom-select__input');\r\n\t\t\t\r\n\t\t\tif (this.field.classList.contains('custom-select_multiple')) {\r\n\t\t\t\t\r\n\t\t\t\tthis.selectMultipleVal(elem, button, input);\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tvar toButtonValue = elem.innerHTML,\r\n\t\t\t\ttoInputValue = (elem.hasAttribute('data-value')) ? elem.getAttribute('data-value') : elem.innerHTML;\r\n\t\t\t\t\r\n\t\t\t\tvar valueElements = this.field.querySelectorAll('.custom-select__val');\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < valueElements.length; i++) {\r\n\t\t\t\t\tvalueElements[i].classList.remove('custom-select__val_checked');\r\n\t\t\t\t\tvalueElements[i].disabled = false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\telem.classList.add('custom-select__val_checked');\r\n\t\t\t\telem.disabled = true;\r\n\t\t\t\t\r\n\t\t\t\tif (button) {\r\n\t\t\t\t\tbutton.innerHTML = toButtonValue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tinput.value = toInputValue;\r\n\t\t\t\t\r\n\t\t\t\tthis.close();\r\n\t\t\t\t\r\n\t\t\t\tif (window.Placeholder) {\r\n\t\t\t\t\tPlaceholder.hide(input, true);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (input.getAttribute('data-submit-form-onchange')) {\r\n\t\t\t\t\tForm.submitForm(input.closest('form'));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.onSelect) {\r\n\t\t\t\t\tthis.onSelect(input, toInputValue, elem.getAttribute('data-second-value'));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.targetAction();\r\n\t\t\t\r\n\t\t\tif (input.classList.contains('var-height-textarea__textarea')) {\r\n\t\t\t\tvarHeightTextarea.setHeight(input);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.field.classList.add('custom-select_changed');\r\n\t\t\t\r\n\t\t\tValidateForm.select(input);\r\n\t\t},\r\n\t\t\r\n\t\tautocomplete: function(elem) {\r\n\t\t\tvar match = false,\r\n\t\t\treg = new RegExp(elem.value, 'gi'),\r\n\t\t\tvalueElements = this.field.querySelectorAll('.custom-select__val');\r\n\t\t\t\r\n\t\t\tif (elem.value.length) {\r\n\t\t\t\tfor (var i = 0; i < valueElements.length; i++) {\r\n\t\t\t\t\tvar valueElem = valueElements[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tvalueElem.classList.remove('custom-select__val_checked');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (valueElem.innerHTML.match(reg)) {\r\n\t\t\t\t\t\tvalueElem.parentElement.classList.remove('hidden');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmatch = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalueElem.parentElement.classList.add('hidden');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!match) {\r\n\t\t\t\tfor (var i = 0; i < valueElements.length; i++) {\r\n\t\t\t\t\tvalueElements[i].parentElement.classList.remove('hidden');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tsetOptions: function (fieldSelector, optObj, nameKey, valKey, secValKey) {\r\n\t\t\tvar fieldElements = document.querySelectorAll(fieldSelector);\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < fieldElements.length; i++) {\r\n\t\t\t\tvar optionsElem = fieldElements[i].querySelector('.custom-select__options');\r\n\t\t\t\t\r\n\t\t\t\toptionsElem.innerHTML = '';\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < optObj.length; i++) {\r\n\t\t\t\t\tvar li = document.createElement('li'),\r\n\t\t\t\t\tsecValAttr = (secValKey != undefined) ? ' data-second-value=\"'+ optObj[i][secValKey] +'\"' : '';\r\n\t\t\t\t\t\r\n\t\t\t\t\tli.innerHTML = '<button type=\"button\" class=\"custom-select__val\" data-value=\"'+ optObj[i][valKey] +'\"'+ secValAttr +'>'+ optObj[i][nameKey] +'</button>';\r\n\t\t\t\t\t\r\n\t\t\t\t\toptionsElem.appendChild(li);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tkeyboard: function (key) {\r\n\t\t\tvar options = this.field.querySelector('.custom-select__options'),\r\n\t\t\thoverItem = options.querySelector('li.hover');\r\n\t\t\t\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 40:\r\n\t\t\t\tif (hoverItem) {\r\n\t\t\t\t\tvar nextItem = function (item) {\r\n\t\t\t\t\t\tvar elem = item.nextElementSibling;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\twhile (elem) {\r\n\t\t\t\t\t\t\tif (!elem) break;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!elemIsHidden(elem)) {\r\n\t\t\t\t\t\t\t\treturn elem;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\telem = elem.nextElementSibling;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}(hoverItem);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nextItem) {\r\n\t\t\t\t\t\thoverItem.classList.remove('hover');\r\n\t\t\t\t\t\tnextItem.classList.add('hover');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptions.scrollTop = options.scrollTop + (nextItem.getBoundingClientRect().top - options.getBoundingClientRect().top);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar elem = options.firstElementChild;\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (elem) {\r\n\t\t\t\t\t\tif (!elem) break;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!elemIsHidden(elem)) {\r\n\t\t\t\t\t\t\telem.classList.add('hover');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telem = elem.nextElementSibling;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tcase 38:\r\n\t\t\t\tif (hoverItem) {\r\n\t\t\t\t\tvar nextItem = function (item) {\r\n\t\t\t\t\t\tvar elem = item.previousElementSibling;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\twhile (elem) {\r\n\t\t\t\t\t\t\tif (!elem) break;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!elemIsHidden(elem)) {\r\n\t\t\t\t\t\t\t\treturn elem;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\telem = elem.previousElementSibling;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}(hoverItem);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nextItem) {\r\n\t\t\t\t\t\thoverItem.classList.remove('hover');\r\n\t\t\t\t\t\tnextItem.classList.add('hover');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptions.scrollTop = options.scrollTop + (nextItem.getBoundingClientRect().top - options.getBoundingClientRect().top);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar elem = options.lastElementChild;\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (elem) {\r\n\t\t\t\t\t\tif (!elem) break;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!elemIsHidden(elem)) {\r\n\t\t\t\t\t\t\telem.classList.add('hover');\r\n\t\t\t\t\t\t\toptions.scrollTop = 9999;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telem = elem.previousElementSibling;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tcase 13:\r\n\t\t\t\tthis.selectVal(hoverItem.querySelector('.custom-select__val'));\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tbuild: function (elementStr) {\r\n\t\t\tvar elements = document.querySelectorAll(elementStr);\r\n\t\t\t\r\n\t\t\tif (!elements.length) return;\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i],\r\n\t\t\t\toptions = elem.querySelectorAll('option'),\r\n\t\t\t\tparent = elem.parentElement,\r\n\t\t\t\toptionsList = '',\r\n\t\t\t\tselectedOption = null;\r\n\t\t\t\t\r\n\t\t\t\t// option list\r\n\t\t\t\tfor (let i = 0; i < options.length; i++) {\r\n\t\t\t\t\tvar opt = options[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (opt.hasAttribute('selected')) {\r\n\t\t\t\t\t\tselectedOption = opt;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t((opt.hasAttribute('data-second-value')) ? ' data-second-value=\"'+ opt.getAttribute('data-second-value') +'\"' : '')\r\n\t\t\t\t\t\r\n\t\t\t\t\toptionsList += '<li><button type=\"button\" class=\"custom-select__val'+ ((opt.hasAttribute('selected')) ? ' custom-select__val_checked' : '') +'\"'+ ( (opt.hasAttribute('value')) ? ' data-value=\"'+ opt.value +'\"' : '') + ((opt.hasAttribute('data-second-value')) ? ' data-second-value=\"'+ opt.getAttribute('data-second-value') +'\"' : '') + ( (opt.hasAttribute('data-target-elements')) ? ' data-target-elements=\"'+ opt.getAttribute('data-target-elements') +'\"' : '') + ((opt.hasAttribute('selected')) ? ' disabled' : '') +'>'+ opt.innerHTML +'</button></li>';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar require = (elem.hasAttribute('data-required')) ? ' data-required=\"'+ elem.getAttribute('data-required') +'\" ' : '',\r\n\t\t\t\tplaceholder = elem.getAttribute('data-placeholder'),\r\n\t\t\t\tsubmitOnChange = (elem.hasAttribute('data-submit-form-onchange')) ? ' data-submit-form-onchange=\"'+ elem.getAttribute('data-submit-form-onchange') +'\" ' : '',\r\n\t\t\t\thead;\r\n\t\t\t\t\r\n\t\t\t\tif (elem.getAttribute('data-type') == 'autocomplete') {\r\n\t\t\t\t\thead = '<button type=\"button\" class=\"custom-select__arr\"></button><input type=\"text\" name=\"'+ elem.name +'\"'+ require + ((placeholder) ? ' placeholder=\"'+ placeholder +'\" ' : '') +'class=\"custom-select__input custom-select__autocomplete form__text-input\" value=\"'+ ((selectedOption) ? selectedOption.innerHTML : '') +'\">';\r\n\t\t\t\t} else {\r\n\t\t\t\t\thead = '<button type=\"button\"'+ ((placeholder) ? ' data-placeholder=\"'+ placeholder +'\"' : '') +' class=\"custom-select__button\">'+ ((selectedOption) ? selectedOption.innerHTML : (placeholder) ? placeholder : '') +'</button>';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar multiple = {\r\n\t\t\t\t\tclass: (elem.multiple) ? ' custom-select_multiple' : '',\r\n\t\t\t\t\tinpDiv: (elem.multiple) ? '<div class=\"custom-select__multiple-inputs\"></div>' : ''\r\n\t\t\t\t},\r\n\t\t\t\thiddenInp = (elem.getAttribute('data-type') != 'autocomplete') ? '<input type=\"hidden\" name=\"'+ elem.name +'\"'+ require + submitOnChange +'class=\"custom-select__input\" value=\"'+ ((selectedOption) ? selectedOption.value : '') +'\">' : '';\r\n\t\t\t\t\r\n\t\t\t\t// output select\r\n\t\t\t\tvar customElem = document.createElement('div');\r\n\t\t\t\tcustomElem.className = 'custom-select'+ multiple.class + ((selectedOption) ? ' custom-select_changed' : '');\r\n\t\t\t\tcustomElem.innerHTML = head +'<ul class=\"custom-select__options\">'+ optionsList +'</ul>'+ hiddenInp + multiple.inpDiv;\r\n\t\t\t\tparent.insertBefore(customElem, parent.firstChild);\r\n\t\t\t\tparent.removeChild(parent.children[1]);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function (elementStr) {\r\n\t\t\tthis.build(elementStr);\r\n\t\t\t\r\n\t\t\t// click on select or value or arrow button\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar btnElem = e.target.closest('.custom-select__button'),\r\n\t\t\t\tvalElem = e.target.closest('.custom-select__val'),\r\n\t\t\t\tarrElem = e.target.closest('.custom-select__arr');\r\n\t\t\t\t\r\n\t\t\t\tif (btnElem) {\r\n\t\t\t\t\tthis.field = btnElem.closest('.custom-select');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (this.field.classList.contains('custom-select_opened')) {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.open();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (valElem) {\r\n\t\t\t\t\tthis.field = valElem.closest('.custom-select');\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.selectVal(valElem);\r\n\t\t\t\t} else if (arrElem) {\r\n\t\t\t\t\tif (!arrElem.closest('.custom-select_opened')) {\r\n\t\t\t\t\t\tarrElem.closest('.custom-select').querySelector('.custom-select__autocomplete').focus();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//focus autocomplete\r\n\t\t\tdocument.addEventListener('focus', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('.custom-select__autocomplete');\r\n\t\t\t\t\r\n\t\t\t\tif (!elem) return;\r\n\t\t\t\t\r\n\t\t\t\tthis.field = elem.closest('.custom-select');\r\n\t\t\t\t\r\n\t\t\t\tthis.close();\r\n\t\t\t\t\r\n\t\t\t\tthis.open();\r\n\t\t\t}, true);\r\n\t\t\t\r\n\t\t\t//input autocomplete\r\n\t\t\tdocument.addEventListener('input', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('.custom-select__autocomplete');\r\n\t\t\t\t\r\n\t\t\t\tif (!elem) return;\r\n\t\t\t\t\r\n\t\t\t\tthis.field = elem.closest('.custom-select');\r\n\t\t\t\t\r\n\t\t\t\tthis.autocomplete(elem);\r\n\t\t\t\t\r\n\t\t\t\tif (!this.field.classList.contains('custom-select_opened')) {\r\n\t\t\t\t\tthis.open();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// keyboard events\r\n\t\t\tdocument.addEventListener('keydown', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('.custom-select_opened');\r\n\t\t\t\t\r\n\t\t\t\tif (!elem) return;\r\n\t\t\t\t\r\n\t\t\t\tthis.field = elem.closest('.custom-select');\r\n\t\t\t\t\r\n\t\t\t\tvar key = e.which || e.keyCode || 0;\r\n\t\t\t\t\r\n\t\t\t\tif (key == 40 || key == 38 || key == 13) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.keyboard(key);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// close all\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tif (!e.target.closest('.custom-select_opened')) {\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// init scripts\r\n\tdocument.addEventListener('DOMContentLoaded', function () {\r\n\t\tSelect.init('select');\r\n\t});\r\n})();","; var AutoComplete;\r\n\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\tAutoComplete = {\r\n\t\tfieldElem: null,\r\n\t\tinputElem: null,\r\n\t\toptionsElem: null,\r\n\t\tvaluesData: null,\r\n\t\tsetValuesData: null,\r\n\t\t\r\n\t\topen: function () {\r\n\t\t\tthis.fieldElem.classList.add('autocomplete_opened');\r\n\t\t\t\r\n\t\t\tvar optionsElem = this.optionsElem;\r\n\t\t\t\r\n\t\t\toptionsElem.style.height = optionsElem.scrollHeight +'px';\r\n\t\t\t\r\n\t\t\toptionsElem.scrollTop = 0;\r\n\t\t\t\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tif (optionsElem.scrollHeight > optionsElem.offsetHeight) {\r\n\t\t\t\t\toptionsElem.classList.add('ovfauto');\r\n\t\t\t\t}\r\n\t\t\t}, 550);\r\n\t\t},\r\n\t\t\r\n\t\tclose: function () {\r\n\t\t\tthis.fieldElem.classList.remove('autocomplete_opened');\r\n\t\t\t\r\n\t\t\tvar optionsElem = this.optionsElem;\r\n\t\t\t\r\n\t\t\toptionsElem.classList.remove('ovfauto');\r\n\t\t\t\r\n\t\t\toptionsElem.style.height = 0;\r\n\t\t},\r\n\t\t\r\n\t\tgetValues: function () {\r\n\t\t\tvar optionsElem = this.optionsElem;\r\n\t\t\t\r\n\t\t\tif (this.inputElem.value.length) {\r\n\t\t\t\tvar preReg = new RegExp(this.inputElem.value, 'i'),\r\n\t\t\t\tvalues = '';\r\n\t\t\t\t\r\n\t\t\t\tif (this.setValuesData) {\r\n\t\t\t\t\tthis.setValuesData(this.inputElem.value, (valuesData) => {\r\n\t\t\t\t\t\tfor (var i = 0; i < valuesData.length; i++) {\r\n\t\t\t\t\t\t\tvar dataVal = valuesData[i];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (dataVal.value.match(preReg)) {\r\n\t\t\t\t\t\t\t\tvalues += '<li><button type=\"button\" class=\"autocomplete__val\">'+ dataVal.value +'</button></li>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (values == '') {\r\n\t\t\t\t\t\t\tvalues = '<li>Nothing found!</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptionsElem.innerHTML = values;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.open();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\toptionsElem.innerHTML = '';\r\n\t\t\t\t\r\n\t\t\t\tthis.close();\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tselectVal: function (itemElem) {\r\n\t\t\tvar valueElem = itemElem.querySelector('.autocomplete__val');\r\n\t\t\t\r\n\t\t\tif (valueElem) {\r\n\t\t\t\tthis.inputElem.value = valueElem.innerHTML;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tkeybinding: function (e) {\r\n\t\t\tvar key = e.which || e.keyCode || 0;\r\n\t\t\t\r\n\t\t\tif (key != 40 && key != 38 && key != 13) return;\r\n\t\t\t\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\tvar optionsElem = this.optionsElem,\r\n\t\t\thoverItem = optionsElem.querySelector('li.hover');\r\n\t\t\t\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 40:\r\n\t\t\t\tif (hoverItem) {\r\n\t\t\t\t\tvar nextItem = hoverItem.nextElementSibling;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nextItem) {\r\n\t\t\t\t\t\thoverItem.classList.remove('hover');\r\n\t\t\t\t\t\tnextItem.classList.add('hover');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptionsElem.scrollTop = optionsElem.scrollTop + (nextItem.getBoundingClientRect().top - optionsElem.getBoundingClientRect().top);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.selectVal(nextItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar nextItem = optionsElem.firstElementChild;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nextItem) {\r\n\t\t\t\t\t\tnextItem.classList.add('hover');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.selectVal(nextItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tcase 38:\r\n\t\t\t\tif (hoverItem) {\r\n\t\t\t\t\tvar nextItem = hoverItem.previousElementSibling;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nextItem) {\r\n\t\t\t\t\t\thoverItem.classList.remove('hover');\r\n\t\t\t\t\t\tnextItem.classList.add('hover');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptionsElem.scrollTop = optionsElem.scrollTop + (nextItem.getBoundingClientRect().top - optionsElem.getBoundingClientRect().top);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.selectVal(nextItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar nextItem = optionsElem.lastElementChild;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nextItem) {\r\n\t\t\t\t\t\tnextItem.classList.add('hover');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptionsElem.scrollTop = 9999;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.selectVal(nextItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tcase 13:\r\n\t\t\t\tif (hoverItem) {\r\n\t\t\t\t\tthis.selectVal(hoverItem);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.inputElem.blur();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function () {\r\n\t\t\t// focus event\r\n\t\t\tdocument.addEventListener('focus', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('.autocomplete__input');\r\n\t\t\t\t\r\n\t\t\t\tif (!elem) return;\r\n\t\t\t\t\r\n\t\t\t\tthis.fieldElem = elem.closest('.autocomplete');\r\n\t\t\t\tthis.inputElem = elem;\r\n\t\t\t\tthis.optionsElem = this.fieldElem.querySelector('.autocomplete__options');\r\n\t\t\t\t\r\n\t\t\t\tthis.getValues();\r\n\t\t\t}, true);\r\n\t\t\t\r\n\t\t\t// blur event\r\n\t\t\tdocument.addEventListener('blur', (e) => {\r\n\t\t\t\tif (e.target.closest('.autocomplete__input')) {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t}, 21);\r\n\t\t\t\t}\r\n\t\t\t}, true);\r\n\t\t\t\r\n\t\t\t// input event\r\n\t\t\tdocument.addEventListener('input', (e) => {\r\n\t\t\t\tif (e.target.closest('.autocomplete__input')) {\r\n\t\t\t\t\tthis.getValues();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// click event\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('.autocomplete__val');\r\n\t\t\t\t\r\n\t\t\t\tif (elem) {\r\n\t\t\t\t\tthis.selectVal(elem.parentElement);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// keyboard events\r\n\t\t\tdocument.addEventListener('keydown', (e) => {\r\n\t\t\t\tif (e.target.closest('.autocomplete_opened')) {\r\n\t\t\t\t\tthis.keybinding(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// init scripts\r\n\tdocument.addEventListener('DOMContentLoaded', function () {\r\n\t\tAutoComplete.init();\r\n\t});\r\n})();","var ValidateForm, Form;\r\n\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\t// validate form\r\n\tValidateForm = {\r\n\t\tinput: null,\r\n\t\t\r\n\t\terrorTip: function (err, errInd, errorTxt) {\r\n\t\t\tconst field = this.input.closest('.form__field') || this.input.parentElement,\r\n\t\t\terrTip = field.querySelector('.field-error-tip');\r\n\t\t\t\r\n\t\t\tif (err) {\r\n\t\t\t\tfield.classList.remove('field-success');\r\n\t\t\t\tfield.classList.add('field-error');\r\n\t\t\t\t\r\n\t\t\t\tif (!errTip) return;\r\n\t\t\t\t\r\n\t\t\t\tif (errInd) {\r\n\t\t\t\t\tif (!errTip.hasAttribute('data-error-text')) {\r\n\t\t\t\t\t\terrTip.setAttribute('data-error-text', errTip.innerHTML);\r\n\t\t\t\t\t}\r\n\t\t\t\t\terrTip.innerHTML = (errInd != 'custom') ? errTip.getAttribute('data-error-text-'+ errInd) : errorTxt;\r\n\t\t\t\t} else if (errTip.hasAttribute('data-error-text')) {\r\n\t\t\t\t\terrTip.innerHTML = errTip.getAttribute('data-error-text');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfield.classList.remove('field-error');\r\n\t\t\t\tfield.classList.add('field-success');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tcustomErrorTip: function (input, errorTxt) {\r\n\t\t\tif (!input) return;\r\n\t\t\t\r\n\t\t\tthis.input = input;\r\n\t\t\t\r\n\t\t\tthis.errorTip(true, 'custom', errorTxt);\r\n\t\t},\r\n\t\t\r\n\t\ttxt: function () {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tif (!/^[0-9a-zа-яё_,.:;@-\\s]*$/i.test(this.input.value)) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tnum: function () {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tif (!/^[0-9.,-]*$/.test(this.input.value)) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tname: function () {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tif (!/^[a-zа-яё'-]{3,21}(\\s[a-zа-яё'-]{3,21})?(\\s[a-zа-яё'-]{3,21})?$/i.test(this.input.value)) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tdate: function () {\r\n\t\t\tvar err = false, \r\n\t\t\terrDate = false, \r\n\t\t\tmatches = this.input.value.match(/^(\\d{2}).(\\d{2}).(\\d{4})$/);\r\n\t\t\t\r\n\t\t\tif (!matches) {\r\n\t\t\t\terrDate = 1;\r\n\t\t\t} else {\r\n\t\t\t\tvar compDate = new Date(matches[3], (matches[2] - 1), matches[1]),\r\n\t\t\t\tcurDate = new Date();\r\n\t\t\t\t\r\n\t\t\t\tif (this.input.hasAttribute('data-min-years-passed')) {\r\n\t\t\t\t\tvar interval = curDate.valueOf() - new Date(curDate.getFullYear() - (+this.input.getAttribute('data-min-years-passed')), curDate.getMonth(), curDate.getDate()).valueOf();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (curDate.valueOf() < compDate.valueOf() || (curDate.getFullYear() - matches[3]) > 100) {\r\n\t\t\t\t\t\terrDate = 1;\r\n\t\t\t\t\t} else if ((curDate.valueOf() - compDate.valueOf()) < interval) {\r\n\t\t\t\t\t\terrDate = 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (compDate.getFullYear() != matches[3] || compDate.getMonth() != (matches[2] - 1) || compDate.getDate() != matches[1]) {\r\n\t\t\t\t\terrDate = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (errDate == 1) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else if (errDate == 2) {\r\n\t\t\t\tthis.errorTip(true, 3);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\temail: function () {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tif (!/^[a-z0-9]+[\\w\\-\\.]*@[\\w\\-]{2,}\\.[a-z]{2,6}$/i.test(this.input.value)) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\turl: function () {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tif (!/^(https?\\:\\/\\/)?[a-zа-я0-9\\-\\.]+\\.[a-zа-я]{2,11}$/i.test(this.input.value)) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\ttel: function () {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tif (!/^\\+7\\([0-9]{3}\\)[0-9]{3}-[0-9]{2}-[0-9]{2}$/.test(this.input.value)) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tpass: function () {\r\n\t\t\tvar err = false,\r\n\t\t\tminLng = this.input.getAttribute('data-min-length');\r\n\t\t\t\r\n\t\t\tif (minLng && this.input.value.length < minLng) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tcheckbox: function (elem) {\r\n\t\t\tthis.input = elem;\r\n\t\t\t\r\n\t\t\tvar group = elem.closest('.form__chbox-group');\r\n\t\t\t\r\n\t\t\tif (group && group.getAttribute('data-tested')) {\r\n\t\t\t\tvar checkedElements = 0,\r\n\t\t\t\telements = group.querySelectorAll('input[type=\"checkbox\"]');\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tif (elements[i].checked) {\r\n\t\t\t\t\t\tcheckedElements++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (checkedElements < group.getAttribute('data-min')) {\r\n\t\t\t\t\tgroup.classList.add('form__chbox-group_error');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgroup.classList.remove('form__chbox-group_error');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else if (elem.getAttribute('data-tested')) {\r\n\t\t\t\tif (elem.getAttribute('data-required') && !elem.checked) {\r\n\t\t\t\t\tthis.errorTip(true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tradio: function (elem) {\r\n\t\t\tthis.input = elem;\r\n\t\t\t\r\n\t\t\tvar checkedElement = false,\r\n\t\t\tgroup = elem.closest('.form__radio-group'),\r\n\t\t\telements = group.querySelectorAll('input[type=\"radio\"]');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tif (elements[i].checked) {\r\n\t\t\t\t\tcheckedElement = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!checkedElement) {\r\n\t\t\t\tgroup.classList.add('form__radio-group_error');\r\n\t\t\t} else {\r\n\t\t\t\tgroup.classList.remove('form__radio-group_error');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tselect: function (elem) {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tthis.input = elem;\r\n\t\t\t\r\n\t\t\tif (elem.getAttribute('data-required') && !elem.value.length) {\r\n\t\t\t\tthis.errorTip(true);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tfile: function (elem, filesArr) {\r\n\t\t\tthis.input = elem;\r\n\t\t\t\r\n\t\t\tvar err = false,\r\n\t\t\terrCount = {ext: 0, size: 0},\r\n\t\t\tmaxFiles = +this.input.getAttribute('data-max-files'),\r\n\t\t\textRegExp = new RegExp('(?:\\\\.'+ this.input.getAttribute('data-ext').replace(/,/g, '|\\\\.') +')$', 'i'),\r\n\t\t\tmaxSize = +this.input.getAttribute('data-max-size'),\r\n\t\t\tfileItemElements = this.input.closest('.custom-file').querySelectorAll('.custom-file__item');;\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < filesArr.length; i++) {\r\n\t\t\t\tvar file = filesArr[i];\r\n\t\t\t\t\r\n\t\t\t\tif (!file.name.match(extRegExp)) {\r\n\t\t\t\t\terrCount.ext++;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (fileItemElements[i]) {\r\n\t\t\t\t\t\tfileItemElements[i].classList.add('file-error');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (file.size > maxSize) {\r\n\t\t\t\t\terrCount.size++;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (fileItemElements[i]) {\r\n\t\t\t\t\t\tfileItemElements[i].classList.add('file-error');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (maxFiles && filesArr.length > maxFiles) {\r\n\t\t\t\tthis.errorTip(true, 4);\r\n\t\t\t\terr = true;\r\n\t\t\t} else if (errCount.ext) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else if (errCount.size) {\r\n\t\t\t\tthis.errorTip(true, 3);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tvalidateOnInput: function (elem) {\r\n\t\t\tthis.input = elem;\r\n\t\t\t\r\n\t\t\tvar dataType = elem.getAttribute('data-type');\r\n\t\t\t\r\n\t\t\tif (elem.getAttribute('data-required') && !elem.value.length) {\r\n\t\t\t\tthis.errorTip(true);\r\n\t\t\t} else if (elem.value.length) {\r\n\t\t\t\tif (dataType) {\r\n\t\t\t\t\tthis[dataType]();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tvalidate: function (formElem) {\r\n\t\t\tvar err = 0;\r\n\t\t\t\r\n\t\t\t// text, password, textarea\r\n\t\t\tvar elements = formElem.querySelectorAll('input[type=\"text\"], input[type=\"password\"], textarea');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(elem)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.input = elem;\r\n\t\t\t\t\r\n\t\t\t\telem.setAttribute('data-tested', 'true');\r\n\t\t\t\t\r\n\t\t\t\tvar dataType = elem.getAttribute('data-type');\r\n\t\t\t\t\r\n\t\t\t\tif (elem.getAttribute('data-required') && !elem.value.length) {\r\n\t\t\t\t\tthis.errorTip(true);\r\n\t\t\t\t\terr++;\r\n\t\t\t\t} else if (elem.value.length) {\r\n\t\t\t\t\tif (dataType) {\r\n\t\t\t\t\t\tif (this[dataType]()) {\r\n\t\t\t\t\t\t\terr++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// select\r\n\t\t\tvar elements = formElem.querySelectorAll('.custom-select__input');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(elem.parentElement)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.select(elem)) {\r\n\t\t\t\t\terr++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// checkboxes\r\n\t\t\tvar elements = formElem.querySelectorAll('input[type=\"checkbox\"]');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(elem)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.input = elem;\r\n\t\t\t\t\r\n\t\t\t\telem.setAttribute('data-tested', 'true');\r\n\t\t\t\t\r\n\t\t\t\tif (elem.getAttribute('data-required') && !elem.checked) {\r\n\t\t\t\t\tthis.errorTip(true);\r\n\t\t\t\t\terr++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// checkbox group\r\n\t\t\tvar groups = formElem.querySelectorAll('.form__chbox-group');\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < groups.length; i++) {\r\n\t\t\t\tvar group = groups[i],\r\n\t\t\t\tcheckedElements = 0;\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(group)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tgroup.setAttribute('data-tested', 'true');\r\n\t\t\t\t\r\n\t\t\t\tvar elements = group.querySelectorAll('input[type=\"checkbox\"]');\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tif (elements[i].checked) {\r\n\t\t\t\t\t\tcheckedElements++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (checkedElements < group.getAttribute('data-min')) {\r\n\t\t\t\t\tgroup.classList.add('form__chbox-group_error');\r\n\t\t\t\t\terr++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgroup.classList.remove('form__chbox-group_error');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// radio group\r\n\t\t\tvar groups = formElem.querySelectorAll('.form__radio-group');\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < groups.length; i++) {\r\n\t\t\t\tvar group = groups[i],\r\n\t\t\t\tcheckedElement = false;\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(group)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tgroup.setAttribute('data-tested', 'true');\r\n\t\t\t\t\r\n\t\t\t\tvar elements = group.querySelectorAll('input[type=\"radio\"]');\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tif (elements[i].checked) {\r\n\t\t\t\t\t\tcheckedElement = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!checkedElement) {\r\n\t\t\t\t\tgroup.classList.add('form__radio-group_error');\r\n\t\t\t\t\terr++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgroup.classList.remove('form__radio-group_error');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// file\r\n\t\t\tvar elements = formElem.querySelectorAll('input[type=\"file\"]');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(elem)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.input = elem;\r\n\t\t\t\t\r\n\t\t\t\tif (CustomFile.inputFiles(elem).length) {\r\n\t\t\t\t\tif (this.file(elem, CustomFile.inputFiles(elem))) {\r\n\t\t\t\t\t\terr++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (elem.getAttribute('data-required')) {\r\n\t\t\t\t\tthis.errorTip(true);\r\n\t\t\t\t\terr++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// passwords compare\r\n\t\t\tvar elements = formElem.querySelectorAll('input[data-pass-compare-input]');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(elem)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.input = elem;\r\n\t\t\t\t\r\n\t\t\t\tvar val = elem.value;\r\n\t\t\t\t\r\n\t\t\t\tif (val.length) {\r\n\t\t\t\t\tvar compElemVal = formElem.querySelector(elem.getAttribute('data-pass-compare-input')).value;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (val !== compElemVal) {\r\n\t\t\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\t\t\terr++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (err) {\r\n\t\t\t\tformElem.classList.add('form-error');\r\n\t\t\t} else {\r\n\t\t\t\tformElem.classList.remove('form-error');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn (err) ? false : true;\r\n\t\t},\r\n\t\t\r\n\t\tinit: function (formSelector) {\r\n\t\t\tdocument.addEventListener('input', (e) => {\r\n\t\t\t\tvar elem = e.target.closest(formSelector +' input[type=\"text\"],'+ formSelector +' input[type=\"password\"],'+ formSelector +' textarea');\r\n\t\t\t\t\r\n\t\t\t\tif (elem && elem.hasAttribute('data-tested')) {\r\n\t\t\t\t\tthis.validateOnInput(elem);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tdocument.addEventListener('change', (e) => {\r\n\t\t\t\tvar elem = e.target.closest(formSelector +' input[type=\"radio\"],'+ formSelector +' input[type=\"checkbox\"]');\r\n\t\t\t\t\r\n\t\t\t\tif (elem) {\r\n\t\t\t\t\tthis[elem.type](elem);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// variable height textarea\r\n\tvar varHeightTextarea = {\r\n\t\tsetHeight: function (elem) {\r\n\t\t\tvar mirror = elem.parentElement.querySelector('.var-height-textarea__mirror'),\r\n\t\t\tmirrorOutput = elem.value.replace(/\\n/g, '<br>');\r\n\t\t\t\r\n\t\t\tmirror.innerHTML = mirrorOutput +'&nbsp;';\r\n\t\t},\r\n\t\t\r\n\t\tinit: function () {\r\n\t\t\tdocument.addEventListener('input', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('.var-height-textarea__textarea');\r\n\t\t\t\t\r\n\t\t\t\tif (!elem) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.setHeight(elem);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// next fieldset\r\n\tvar NextFieldset = {\r\n\t\tnext: function (btnElem, fwd) {\r\n\t\t\tvar nextFieldset = (btnElem.hasAttribute('data-go-to-fieldset')) ? document.querySelector(btnElem.getAttribute('data-go-to-fieldset')) : null;\r\n\t\t\t\r\n\t\t\tif (!nextFieldset) return;\r\n\t\t\t\r\n\t\t\tvar currentFieldset = btnElem.closest('.fieldset__item'),\r\n\t\t\tgoTo = (fwd) ? ValidateForm.validate(currentFieldset) : true;\r\n\t\t\t\r\n\t\t\tif (goTo) {\r\n\t\t\t\tcurrentFieldset.classList.add('fieldset__item_hidden');\r\n\t\t\t\tnextFieldset.classList.remove('fieldset__item_hidden');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function (nextBtnSelector, prevBtnSelector) {\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar nextBtnElem = e.target.closest(nextBtnSelector),\r\n\t\t\t\tprevBtnElem = e.target.closest(prevBtnSelector);\r\n\t\t\t\t\r\n\t\t\t\tif (nextBtnElem) {\r\n\t\t\t\t\tthis.next(nextBtnElem, true);\r\n\t\t\t\t} else if (prevBtnElem) {\r\n\t\t\t\t\tthis.next(prevBtnElem, false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// form\r\n\tForm = {\r\n\t\tonSubmit: null,\r\n\t\t\r\n\t\tsubmitForm: function (formElem, e) {\r\n\t\t\tif (!ValidateForm.validate(formElem)) {\r\n\t\t\t\tif (e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tformElem.classList.add('form_sending');\r\n\t\t\t\r\n\t\t\tif (!this.onSubmit) {\r\n\t\t\t\tformElem.submit();\r\n\t\t\t\t\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// clear form\r\n\t\t\tfunction clear() {\r\n\t\t\t\tvar elements = formElem.querySelectorAll('input[type=\"text\"], input[type=\"password\"], textarea');\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\telem.value = '';\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (window.Placeholder) {\r\n\t\t\t\t\t\tPlaceholder.hide(elem, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (window.Select) {\r\n\t\t\t\t\tSelect.reset();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar textareaMirrors = formElem.querySelectorAll('.form__textarea-mirror');\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < textareaMirrors.length; i++) {\r\n\t\t\t\t\ttextareaMirrors[i].innerHTML = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// submit button\r\n\t\t\tfunction actSubmitBtn(st) {\r\n\t\t\t\tvar elements = formElem.querySelectorAll('button[type=\"submit\"], input[type=\"submit\"]');\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!elemIsHidden(elem)) {\r\n\t\t\t\t\t\tif (st) {\r\n\t\t\t\t\t\t\telem.removeAttribute('disabled');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telem.setAttribute('disabled', 'disable');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// call onSubmit\r\n\t\t\tconst ret = this.onSubmit(formElem, function (obj) {\r\n\t\t\t\tobj = obj || {};\r\n\t\t\t\t\r\n\t\t\t\tactSubmitBtn(obj.unlockSubmitButton);\r\n\t\t\t\t\r\n\t\t\t\tformElem.classList.remove('form_sending');\r\n\t\t\t\t\r\n\t\t\t\tif (obj.clearForm == true) {\r\n\t\t\t\t\tclear();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif (ret === false) {\r\n\t\t\t\tif (e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tactSubmitBtn(false);\r\n\t\t\t} else {\r\n\t\t\t\tformElem.submit();\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function (formSelector) {\r\n\t\t\tif (!document.querySelector(formSelector)) return;\r\n\t\t\t\r\n\t\t\tValidateForm.init(formSelector);\r\n\t\t\t\r\n\t\t\t// submit event\r\n\t\t\tdocument.addEventListener('submit', (e) => {\r\n\t\t\t\tvar formElem = e.target.closest(formSelector);\r\n\t\t\t\t\r\n\t\t\t\tif (formElem) {\r\n\t\t\t\t\tthis.submitForm(formElem, e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// keyboard event\r\n\t\t\tdocument.addEventListener('keydown', (e) => {\r\n\t\t\t\tvar formElem = e.target.closest(formSelector);\r\n\t\t\t\t\r\n\t\t\t\tif (!formElem) return;\r\n\t\t\t\t\r\n\t\t\t\tvar key = e.which || e.keyCode || 0;\r\n\t\t\t\t\r\n\t\t\t\tif (e.ctrlKey && key == 13) {\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tthis.submitForm(formElem, e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// bind labels\r\n\tfunction BindLabels(elementsStr) {\r\n\t\tvar elements = document.querySelectorAll(elementsStr);\r\n\t\t\r\n\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\tvar elem = elements[i],\r\n\t\t\tlabel = elem.parentElement.querySelector('label'),\r\n\t\t\tforID = (elem.hasAttribute('id')) ? elem.id : 'keylabel-'+ i;\r\n\t\t\t\r\n\t\t\tif (label && !label.hasAttribute('for')) {\r\n\t\t\t\tlabel.htmlFor = forID;\r\n\t\t\t\telem.id = forID;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t// duplicate form\r\n\tvar DuplicateForm = {\r\n\t\tadd: function (btnElem) {\r\n\t\t\tvar modelElem = (btnElem.hasAttribute('data-form-model')) ? document.querySelector(btnElem.getAttribute('data-form-model')) : null,\r\n\t\t\tdestElem = (btnElem.hasAttribute('data-duplicated-dest')) ? document.querySelector(btnElem.getAttribute('data-duplicated-dest')) : null;\r\n\t\t\t\r\n\t\t\tif (!modelElem || !destElem) return;\r\n\t\t\t\r\n\t\t\tvar duplicatedDiv = document.createElement('div');\r\n\t\t\t\r\n\t\t\tduplicatedDiv.className = 'duplicated';\r\n\t\t\t\r\n\t\t\tduplicatedDiv.innerHTML = modelElem.innerHTML;\r\n\t\t\t\r\n\t\t\tdestElem.appendChild(duplicatedDiv);\r\n\t\t\t\r\n\t\t\tvar dupicatedElements = destElem.querySelectorAll('.duplicated');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < dupicatedElements.length; i++) {\r\n\t\t\t\tvar dupicatedElem = dupicatedElements[i],\r\n\t\t\t\tlabelElements = dupicatedElem.querySelectorAll('label'),\r\n\t\t\t\tinputElements = dupicatedElem.querySelectorAll('input');\r\n\t\t\t\t\r\n\t\t\t\tfor (var j = 0; j < labelElements.length; j++) {\r\n\t\t\t\t\tvar elem = labelElements[j];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (elem.htmlFor != '') {\r\n\t\t\t\t\t\telem.htmlFor += '-'+ i +'-'+ j;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (var j = 0; j < inputElements.length; j++) {\r\n\t\t\t\t\tvar elem = inputElements[j];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (elem.id != '') {\r\n\t\t\t\t\t\telem.id += '-'+ i +'-'+ j;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tremove: function (btnElem) {\r\n\t\t\tvar duplElem =  btnElem.closest('.duplicated');\r\n\t\t\t\r\n\t\t\tif (duplElem) {\r\n\t\t\t\tduplElem.innerHTML = '';\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function (addBtnSelector, removeBtnSelector) {\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar addBtnElem = e.target.closest(addBtnSelector),\r\n\t\t\t\tremoveBtnElem = e.target.closest(removeBtnSelector);\r\n\t\t\t\t\r\n\t\t\t\tif (addBtnElem) {\r\n\t\t\t\t\tthis.add(addBtnElem);\r\n\t\t\t\t} else if (removeBtnElem) {\r\n\t\t\t\t\tthis.remove(removeBtnElem);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// set tabindex\r\n\t/*function SetTabindex(elementsStr) {\r\n\t\tvar elements = document.querySelectorAll(elementsStr);\r\n\t\t\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tvar elem = elements[i];\r\n\t\t\t\r\n\t\t\tif (!elemIsHidden(elem)) {\r\n\t\t\t\telem.setAttribute('tabindex', i + 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}*/\r\n\t\r\n\t// init scripts\r\n\tdocument.addEventListener('DOMContentLoaded', function () {\r\n\t\tBindLabels('input[type=\"text\"], input[type=\"checkbox\"], input[type=\"radio\"]');\r\n\t\t// SetTabindex('input[type=\"text\"], input[type=\"password\"], textarea');\r\n\t\tvarHeightTextarea.init();\r\n\t\tNextFieldset.init('.js-next-fieldset-btn', '.js-prev-fieldset-btn');\r\n\t\tDuplicateForm.init('.js-dupicate-form-btn', '.js-remove-dupicated-form-btn');\r\n\t});\r\n})();","/*\r\nnew Alert({\r\n\tcontent: 'We use coockie',\r\n\tposition: 'top', // default - bottom\r\n\tshowOnce: true, // default - false\r\n\tcloseBtn: false // default - true\r\n\taddClass: 'alert-class'\r\n});\r\n*/\r\n\r\n; var Alert;\r\n\r\n(function () {\r\n\t'use strict';\r\n\r\n\tvar alertIndex = 0;\r\n\r\n\tAlert = function (opt) {\r\n\t\topt = opt || {};\r\n\r\n\t\topt.closeBtn = (opt.closeBtn !== undefined) ? opt.closeBtn : true;\r\n\r\n\t\tvar alertId = 'alert-id-' + (alertIndex++);\r\n\r\n\t\tif (opt.showOnce) {\r\n\t\t\tlet hiddenAlert = window.localStorage.getItem('notShowAlert=' + alertId);\r\n\r\n\t\t\tif (hiddenAlert !== null && hiddenAlert === 'true') {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t//add alert to DOM\r\n\t\tvar alertElem = document.createElement('div');\r\n\r\n\t\talertElem.className = 'alert';\r\n\r\n\t\talertElem.id = alertId;\r\n\r\n\t\talertElem.innerHTML = '<div></div>' + ((opt.closeBtn) ? '<button class=\"js-alert-close alert__close-btn\"></button>' : '');\r\n\r\n\t\tdocument.body.appendChild(alertElem);\r\n\r\n\t\tif (opt.position == 'top') {\r\n\t\t\talertElem.classList.add('alert_top');\r\n\t\t}\r\n\r\n\t\tif (opt.addClass) {\r\n\t\t\talertElem.classList.add(opt.addClass);\r\n\t\t}\r\n\r\n\t\t// set content\r\n\t\tthis.setContent = function (content) {\r\n\t\t\talertElem.querySelector('div').innerHTML = content;\r\n\t\t}\r\n\r\n\t\tif (opt.content) {\r\n\t\t\tthis.setContent(opt.content);\r\n\t\t}\r\n\r\n\t\t// hide permanently\r\n\t\tfunction hidePermanently() {\r\n\t\t\twindow.localStorage.setItem('notShowAlert=' + alertId, 'true');\r\n\t\t}\r\n\r\n\t\t// hide\r\n\t\tfunction hide() {\r\n\t\t\talertElem.classList.add('alert_hidden');\r\n\r\n\t\t\tif (opt.showOnce) {\r\n\t\t\t\thidePermanently();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\talertElem.addEventListener('click', function (e) {\r\n\t\t\tif (e.target.closest('.js-alert-close')) {\r\n\t\t\t\thide();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n})();","(function() {\r\n   'use strict';\r\n   \r\n   // animate when is visible\r\n   const animationOnVisible = {\r\n      animElements: null,\r\n      \r\n      scroll: function() {\r\n         const winBotEdge = window.pageYOffset + window.innerHeight;\r\n         \r\n         for (let i = 0; i < this.animElements.length; i++) {\r\n            const animElem = this.animElements[i],\r\n            animElemOffsetTop = animElem.getBoundingClientRect().top + window.pageYOffset,\r\n            animElemOffsetBot = animElemOffsetTop + animElem.offsetHeight;\r\n            \r\n            if (winBotEdge > animElemOffsetBot && window.pageYOffset < animElemOffsetTop) {\r\n               animElem.classList.add('animated');\r\n            } else {\r\n               animElem.classList.remove('animated');\r\n            }\r\n         }\r\n      },\r\n      \r\n      init: function() {\r\n         const animElements = document.querySelectorAll('.animate');\r\n         \r\n         if (animElements.length) {\r\n            this.animElements = animElements;\r\n            this.scroll();\r\n         }\r\n      }\r\n   };\r\n   \r\n   // document ready\r\n   document.addEventListener('DOMContentLoaded', function() {\r\n      animationOnVisible.init();\r\n      \r\n      if (animationOnVisible.animElements) {\r\n         window.addEventListener('scroll', animationOnVisible.scroll);\r\n      }\r\n   });\r\n})();"]}