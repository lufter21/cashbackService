{"version":3,"sources":["global.js","header.js","menu.js","toggle.js","lazy-load.js","popup.js","select.js","autocomplete.js","form.js","animation.js"],"names":["browser","elemIsHidden","ajax","animate","document","documentElement","setAttribute","navigator","userAgent","toLowerCase","test","CustomEvent","e","window","event","params","evt","createEvent","bubbles","cancelable","detail","undefined","initCustomEvent","prototype","Object","create","Event","winResizedEvent","winWidthResizedEvent","rsz","beginWidth","innerWidth","addEventListener","setTimeout","dispatchEvent","Element","closest","ElProto","matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","selector","parentElement","elem","compStyle","getComputedStyle","display","visibility","opacity","options","xhr","XMLHttpRequest","open","url","send","setRequestHeader","onreadystatechange","readyState","status","success","response","error","draw","duration","ease","complete","start","performance","now","requestAnimationFrame","anim","time","timeFraction","easing","quad","Math","pow","MobNav","headerElem","getElementById","fixHeader","pageYOffset","classList","add","body","contains","remove","winScrollTop","fixBody","st","style","top","scrollTo","btnElem","headerId","close","openBtnElements","querySelectorAll","openBtn","i","length","init","openElem","target","closeElem","closeBtn","menuLinkElement","menuLinkSelector","preventDefault","Menu","toggle","elementStr","subMenuStr","subMenuElem","querySelector","height","mainElem","itemElements","subMenuElements","scrollHeight","Toggle","toggledClass","onChange","toggleElem","state","targetElements","getAttribute","hasAttribute","dependenceTargetElements","off","innerHTML","onDocClickOff","onDocClickOffSelector","toggleElements","targetSelectors","toggleSelector","LazyLoad","opt","elements","doLoad","src","Popup","MediaPopup","onClose","headerSelector","offset","clientWidth","right","callback","elemParent","message","msg","element","location","hash","image","args","elemPopup","popupStr","elemImg","href","video","next","group","index","slice","call","indexOf","type","caption","Select","field","hideCssClass","onSelect","reset","parentElem","parElem","fieldElements","buttonElements","inputElements","valueElements","value","blur","optionsElements","listItemElements","opionsElem","scrollTop","selectMultipleVal","button","input","toButtonValue","toInputValue","inputsBlock","checkedElements","join","yetInput","createElement","name","appendChild","targetAction","targetElem","textInputElement","focus","selectVal","disabled","Placeholder","hide","Form","submitForm","varHeightTextarea","setHeight","ValidateForm","select","autocomplete","match","reg","RegExp","valueElem","setOptions","fieldSelector","optObj","nameKey","valKey","secValKey","optionsElem","li","secValAttr","keyboard","key","hoverItem","nextItem","item","nextElementSibling","getBoundingClientRect","firstElementChild","previousElementSibling","lastElementChild","build","parent","optionsList","selectedOption","require","placeholder","submitOnChange","head","multiple","class","inpDiv","hiddenInp","customElem","className","insertBefore","firstChild","removeChild","children","valElem","arrElem","which","keyCode","AutoComplete","fieldElem","inputElem","valuesData","setValuesData","offsetHeight","getValues","preReg","values","dataVal","itemElem","keybinding","errorTip","err","errInd","errorTxt","errTip","customErrorTip","txt","num","date","errDate","compDate","Date","curDate","interval","valueOf","getFullYear","getMonth","getDate","email","tel","pass","minLng","checkbox","checked","radio","checkedElement","file","filesArr","errCount","ext","size","maxFiles","extRegExp","replace","maxSize","fileItemElements","validateOnInput","dataType","validate","formElem","groups","CustomFile","inputFiles","val","compElemVal","formSelector","mirror","mirrorOutput","NextFieldset","fwd","nextFieldset","currentFieldset","goTo","nextBtnSelector","prevBtnSelector","nextBtnElem","prevBtnElem","onSubmit","submit","clear","textareaMirrors","actSubmitBtn","removeAttribute","ret","obj","unlockSubmitButton","clearForm","ctrlKey","BindLabels","elementsStr","label","forID","id","htmlFor","DuplicateForm","modelElem","destElem","duplicatedDiv","dupicatedElements","dupicatedElem","labelElements","j","duplElem","addBtnSelector","removeBtnSelector","addBtnElem","removeBtnElem","animationOnVisible","animElements","scroll","winBotEdge","innerHeight","animElem","animElemOffsetTop","animElemOffsetBot"],"mappings":"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","file":"script.js","sourcesContent":["// global variables\r\n; var browser, elemIsHidden, ajax, animate;\r\n\r\n(function() {\r\n\t'use strict';\r\n\t\r\n\t// Get useragent\r\n\tdocument.documentElement.setAttribute('data-useragent', navigator.userAgent.toLowerCase());\r\n\t\r\n\t// Browser identify\r\n\tbrowser = (function(userAgent) {\r\n\t\tuserAgent = userAgent.toLowerCase();\r\n\t\t\r\n\t\tif (/(msie|rv:11\\.0)/.test(userAgent)) {\r\n\t\t\treturn 'ie';\r\n\t\t} else if (/firefox/.test(userAgent)) {\r\n\t\t\treturn 'ff';\r\n\t\t}\r\n\t})(navigator.userAgent);\r\n\t\r\n\t// Add support CustomEvent constructor for IE\r\n\ttry {\r\n\t\tnew CustomEvent(\"IE has CustomEvent, but doesn't support constructor\");\r\n\t} catch (e) {\r\n\t\twindow.CustomEvent = function(event, params) {\r\n\t\t\tvar evt = document.createEvent(\"CustomEvent\");\r\n\r\n\t\t\tparams = params || {\r\n\t\t\t\tbubbles: false,\r\n\t\t\t\tcancelable: false,\r\n\t\t\t\tdetail: undefined\r\n\t\t\t};\r\n\r\n\t\t\tevt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\r\n\t\t\t\r\n\t\t\treturn evt;\r\n\t\t}\r\n\t\t\r\n\t\tCustomEvent.prototype = Object.create(window.Event.prototype);\r\n\t}\r\n\t\r\n\t// Window Resized Event\r\n\tconst winResizedEvent = new CustomEvent('winResized'),\r\n\twinWidthResizedEvent = new CustomEvent('winWidthResized');\r\n\r\n\tlet rsz = true,\r\n\tbeginWidth = window.innerWidth;\r\n\t\r\n\twindow.addEventListener('resize', function() {\r\n\t\tif (rsz) {\r\n\t\t\trsz = false;\r\n\t\t\t\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\twindow.dispatchEvent(winResizedEvent);\r\n\t\t\t\t\r\n\t\t\t\tif (beginWidth != window.innerWidth) {\r\n\t\t\t\t\twindow.dispatchEvent(winWidthResizedEvent);\r\n\r\n\t\t\t\t\tbeginWidth = window.innerWidth\r\n\t\t\t\t}\r\n\r\n\t\t\t\trsz = true;\r\n\t\t\t}, 1021);\r\n\t\t}\r\n\t});\r\n\t\r\n\t// Closest polyfill\r\n\tif (!Element.prototype.closest) {\r\n\t\t(function(ElProto) {\r\n\t\t\tElProto.matches = ElProto.matches || ElProto.mozMatchesSelector || ElProto.msMatchesSelector || ElProto.oMatchesSelector || ElProto.webkitMatchesSelector;\r\n\t\t\t\r\n\t\t\tElProto.closest = ElProto.closest || function closest(selector) {\r\n\t\t\t\tif (!this) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.matches(selector)) {\r\n\t\t\t\t\treturn this;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!this.parentElement) {\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.parentElement.closest(selector);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t})(Element.prototype);\r\n\t}\r\n\t\r\n\t// Check element for hidden\r\n\telemIsHidden = function(elem) {\r\n\t\twhile (elem) {\r\n\t\t\tif (!elem) break;\r\n\t\t\t\r\n\t\t\tconst compStyle = getComputedStyle(elem);\r\n\t\t\t\r\n\t\t\tif (compStyle.display == 'none' || compStyle.visibility == 'hidden' || compStyle.opacity == '0') return true;\r\n\t\t\t\r\n\t\t\telem = elem.parentElement;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t// Ajax\r\n\tajax = function(options) {\r\n\t\tconst xhr = new XMLHttpRequest();\r\n\t\t\r\n\t\txhr.open('POST', options.url);\r\n\t\t\r\n\t\tif (typeof options.send == 'string') {\r\n\t\t\txhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n\t\t}\r\n\t\t\r\n\t\txhr.onreadystatechange = function() {\r\n\t\t\tif (xhr.readyState == 4 && xhr.status == 200) {\r\n\t\t\t\toptions.success(xhr.response);\r\n\t\t\t} else if (xhr.readyState == 4 && xhr.status != 200) {\r\n\t\t\t\toptions.error(xhr.response);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\txhr.send(options.send);\r\n\t}\r\n\t\r\n\t/*\r\n\tAnimation\r\n\tanimate(function(takes 0...1) {}, Int duration in ms[, Str easing[, Fun animation complete]]);\r\n\t*/\r\n\tanimate = function(draw, duration, ease, complete) {\r\n\t\tconst start = performance.now();\r\n\t\t\r\n\t\trequestAnimationFrame(function anim(time) {\r\n\t\t\tlet timeFraction = (time - start) / duration;\r\n\t\t\t\r\n\t\t\tif (timeFraction > 1) {\r\n\t\t\t\ttimeFraction = 1;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdraw((ease) ? easing(timeFraction, ease) : timeFraction);\r\n\t\t\t\r\n\t\t\tif (timeFraction < 1) {\r\n\t\t\t\trequestAnimationFrame(anim);\r\n\t\t\t} else {\r\n\t\t\t\tif (complete !== undefined) {\r\n\t\t\t\t\tcomplete();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tfunction easing(timeFraction, ease) {\r\n\t\tswitch (ease) {\r\n\t\t\tcase 'easeInQuad':\r\n\t\t\treturn quad(timeFraction);\r\n\t\t\t\r\n\t\t\tcase 'easeOutQuad':\r\n\t\t\treturn 1 - quad(1 - timeFraction);\r\n\t\t\t\r\n\t\t\tcase 'easeInOutQuad':\r\n\t\t\tif (timeFraction <= 0.5) {\r\n\t\t\t\treturn quad(2 * timeFraction) / 2;\r\n\t\t\t} else {\r\n\t\t\t\treturn (2 - quad(2 * (1 - timeFraction))) / 2;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction quad(timeFraction) {\r\n\t\treturn Math.pow(timeFraction, 2)\r\n\t}\r\n})();","; var MobNav;\r\n\r\n(function() {\r\n\t'use strict';\r\n\r\n\t// fix header\r\n\tconst headerElem = document.getElementById('header');\r\n\r\n\tfunction fixHeader() {\r\n\t\tif (window.pageYOffset > 21) {\r\n\t\t\theaderElem.classList.add('header_fixed');\r\n\t\t} else if (!document.body.classList.contains('popup-is-opened') && !document.body.classList.contains('mob-nav-is-opened')) {\r\n\t\t\theaderElem.classList.remove('header_fixed');\r\n\t\t}\r\n\t}\r\n\r\n\tfixHeader();\r\n\r\n\twindow.addEventListener('scroll', fixHeader);\r\n\r\n\t//mob menu\r\n\tMobNav = {\r\n\t\toptions: null,\r\n\t\twinScrollTop: 0,\r\n\r\n\t\tfixBody: function(st) {\r\n\t\t\tif (st) {\r\n\t\t\t\tthis.winScrollTop = window.pageYOffset;\r\n\r\n\t\t\t\tdocument.body.classList.add('mob-nav-is-opened');\r\n\t\t\t\tdocument.body.style.top = -this.winScrollTop +'px';\r\n\t\t\t} else {\r\n\t\t\t\tdocument.body.classList.remove('mob-nav-is-opened');\r\n\r\n\t\t\t\tif (this.winScrollTop > 0) {\r\n\t\t\t\t\twindow.scrollTo(0, this.winScrollTop);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\topen: function(btnElem) {\r\n\t\t\tvar headerElem = document.getElementById(this.options.headerId);\r\n\r\n\t\t\tif (!headerElem) return;\r\n\r\n\t\t\tif (btnElem.classList.contains('opened')) {\r\n\t\t\t\tthis.close();\r\n\t\t\t} else {\r\n\t\t\t\tbtnElem.classList.add('opened');\r\n\t\t\t\theaderElem.classList.add('opened');\r\n\t\t\t\tthis.fixBody(true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tclose: function() {\r\n\t\t\tvar headerElem = document.getElementById(this.options.headerId);\r\n\r\n\t\t\tif (!headerElem) return;\r\n\r\n\t\t\theaderElem.classList.remove('opened');\r\n\r\n\t\t\tvar openBtnElements = document.querySelectorAll(this.options.openBtn);\r\n\r\n\t\t\tfor (var i = 0; i < openBtnElements.length; i++) {\r\n\t\t\t\topenBtnElements[i].classList.remove('opened');\r\n\t\t\t}\r\n\r\n\t\t\tthis.fixBody(false);\r\n\t\t},\r\n\r\n\t\tinit: function(options) {\r\n\t\t\tthis.options = options;\r\n\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar openElem = e.target.closest(options.openBtn),\r\n\t\t\t\tcloseElem = e.target.closest(options.closeBtn),\r\n\t\t\t\tmenuLinkElement = e.target.closest(options.menuLinkSelector);\r\n\r\n\t\t\t\tif (openElem) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tthis.open(openElem);\r\n\t\t\t\t} else if (closeElem) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t} else if (menuLinkElement) {\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})();","/*\r\n* call Menu.init(Str menu item selector, Str sub menu selector);\r\n*/\r\nvar Menu;\r\n\r\n(function() {\r\n\t'use strict';\r\n\r\n\tMenu = {\r\n\t\ttoggle: function(elem, elementStr, subMenuStr) {\r\n\t\t\tvar subMenuElem = elem.querySelector(subMenuStr);\r\n\r\n\t\t\tif (!subMenuElem) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (elem.classList.contains('active')) {\r\n\t\t\t\tsubMenuElem.style.height = 0;\r\n\r\n\t\t\t\telem.classList.remove('active');\r\n\t\t\t} else {\r\n\t\t\t\tvar mainElem = elem.closest('.menu'),\r\n\t\t\t\titemElements = mainElem.querySelectorAll(elementStr),\r\n\t\t\t\tsubMenuElements = mainElem.querySelectorAll(subMenuStr);\r\n\r\n\t\t\t\tfor (var i = 0; i < itemElements.length; i++) {\r\n\t\t\t\t\titemElements[i].classList.remove('accord__button_active');\r\n\t\t\t\t\tsubMenuElements[i].style.height = 0;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsubMenuElem.style.height = subMenuElem.scrollHeight +'px';\r\n\r\n\t\t\t\telem.classList.add('active');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinit: function(elementStr, subMenuStr) {\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar elem = e.target.closest(elementStr);\r\n\r\n\t\t\t\tif (!elem) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.toggle(elem, elementStr, subMenuStr);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})();","/*\r\nToggle.init(Str toggleSelector[, onDocClickToggleOffSelecor[, Str toggledClass (default - 'toggled')]]);\r\n\r\nToggle.onChange = function(toggleElem, state) {\r\n\t// code...\r\n}\r\n*/\r\n\r\n; var Toggle;\r\n\r\n(function() {\r\n\t'use strict';\r\n\t\r\n\tToggle = {\r\n\t\ttoggledClass: 'toggled',\r\n\t\tonChange: null,\r\n\t\t\r\n\t\ttarget: function(toggleElem, state) {\r\n\t\t\tvar targetElements = document.querySelectorAll(toggleElem.getAttribute('data-target-elements'));\r\n\t\t\t\r\n\t\t\tif (!targetElements.length) return;\r\n\t\t\t\r\n\t\t\tif (state) {\r\n\t\t\t\tfor (var i = 0; i < targetElements.length; i++) {\r\n\t\t\t\t\ttargetElements[i].classList.add(this.toggledClass);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//dependence elements\r\n\t\t\t\tif (toggleElem.hasAttribute('data-dependence-target-elements')) {\r\n\t\t\t\t\tvar dependenceTargetElements = document.querySelectorAll(toggleElem.getAttribute('data-dependence-target-elements'));\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i < dependenceTargetElements.length; i++) {\r\n\t\t\t\t\t\tdependenceTargetElements[i].classList.remove(this.toggledClass);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (var i = 0; i < targetElements.length; i++) {\r\n\t\t\t\t\ttargetElements[i].classList.remove(this.toggledClass);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\ttoggle: function(toggleElem, off) {\r\n\t\t\tvar state;\r\n\t\t\t\r\n\t\t\tif (toggleElem.classList.contains(this.toggledClass)) {\r\n\t\t\t\ttoggleElem.classList.remove(this.toggledClass);\r\n\t\t\t\t\r\n\t\t\t\tstate = false;\r\n\t\t\t\t\r\n\t\t\t\tif (toggleElem.hasAttribute('data-first-text')) {\r\n\t\t\t\t\ttoggleElem.innerHTML = toggleElem.getAttribute('data-first-text');\r\n\t\t\t\t}\r\n\t\t\t} else if (!off) {\r\n\t\t\t\ttoggleElem.classList.add(this.toggledClass);\r\n\t\t\t\t\r\n\t\t\t\tstate = true;\r\n\t\t\t\t\r\n\t\t\t\tif (toggleElem.hasAttribute('data-second-text')) {\r\n\t\t\t\t\ttoggleElem.setAttribute('data-first-text', toggleElem.innerHTML);\r\n\t\t\t\t\t\r\n\t\t\t\t\ttoggleElem.innerHTML = toggleElem.getAttribute('data-second-text');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//target\r\n\t\t\tif (toggleElem.hasAttribute('data-target-elements')) {\r\n\t\t\t\tthis.target(toggleElem, state);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//call onChange\r\n\t\t\tif (this.onChange) {\r\n\t\t\t\tthis.onChange(toggleElem, state);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tonDocClickOff: function (e, onDocClickOffSelector) {\r\n\t\t\tvar toggleElements = document.querySelectorAll(onDocClickOffSelector + '.' +this.toggledClass);\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < toggleElements.length; i++) {\r\n\t\t\t\tvar elem = toggleElements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (elem.hasAttribute('data-target-elements')) {\r\n\t\t\t\t\tvar targetSelectors = elem.getAttribute('data-target-elements');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!e.target.closest(targetSelectors)) {\r\n\t\t\t\t\t\tthis.toggle(elem, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function(toggleSelector, onDocClickOffSelector, toggledClass) {\r\n\t\t\tif (toggledClass) {\r\n\t\t\t\tthis.toggledClass = toggledClass;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar toggleElem = e.target.closest(toggleSelector);\r\n\t\t\t\t\r\n\t\t\t\tif (toggleElem) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.toggle(toggleElem);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.onDocClickOff(e, onDocClickOffSelector);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n})();","/* \r\nnew LazyLoad({\r\n   selector: @Str,\r\n   event: false\r\n});\r\n*/\r\n\r\n; var LazyLoad;\r\n\r\n(function() {\r\n   'use strict';\r\n   \r\n   LazyLoad = function(opt) {\r\n      opt = opt || {};\r\n      \r\n      const elements = document.querySelectorAll(opt.selector);\r\n      \r\n      if (!elements.length) return;\r\n      \r\n      function doLoad() {\r\n         for (let i = 0; i < elements.length; i++) {\r\n            const elem = elements[i],\r\n            src = elem.getAttribute('data-src') || null;\r\n            \r\n            if (src) {\r\n               elem.src = src;\r\n            }\r\n         }\r\n      }\r\n      \r\n      // do load\r\n      if (opt.event && opt.event == 'scroll') {} else {\r\n         setTimeout(doLoad, 1000);\r\n      }\r\n   }\r\n})();","var Popup, MediaPopup;\r\n\r\n(function() {\r\n\t'use strict';\r\n\r\n\t//popup core\r\n\tPopup = {\r\n\t\twinScrollTop: 0,\r\n\t\tonClose: null,\r\n\t\theaderSelector: '.header',\r\n\r\n\t\tfixBody: function(st) {\r\n\t\t\tvar headerElem = document.querySelector(this.headerSelector);\r\n\r\n\t\t\tif (st && !document.body.classList.contains('popup-is-opened')) {\r\n\t\t\t\tthis.winScrollTop = window.pageYOffset;\r\n\r\n\t\t\t\tvar offset = window.innerWidth - document.documentElement.clientWidth;\r\n\r\n\t\t\t\tdocument.body.classList.add('popup-is-opened');\r\n\r\n\t\t\t\tif (headerElem) {\r\n\t\t\t\t\theaderElem.style.right = offset +'px';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdocument.body.style.right = offset +'px';\r\n\r\n\t\t\t\tdocument.body.style.top = (-this.winScrollTop) +'px';\r\n\t\t\t} else if (!st) {\r\n\t\t\t\tif (headerElem) {\r\n\t\t\t\t\theaderElem.style.right = '';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdocument.body.classList.remove('popup-is-opened');\r\n\r\n\t\t\t\twindow.scrollTo(0, this.winScrollTop);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\topen: function(elementStr, callback) {\r\n\t\t\tvar elem = document.querySelector(elementStr);\r\n\r\n\t\t\tif (!elem || !elem.classList.contains('popup__window')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.close();\r\n\r\n\t\t\tvar elemParent = elem.parentElement;\r\n\t\t\t\r\n\t\t\telemParent.classList.add('popup_visible');\r\n\r\n\t\t\telem.classList.add('popup__window_visible');\r\n\r\n\t\t\tif (callback) {\r\n\t\t\t\tthis.onClose = callback;\r\n\t\t\t}\r\n\r\n\t\t\tthis.fixBody(true);\r\n\r\n\t\t\treturn elem;\r\n\t\t},\r\n\r\n\t\tmessage: function(elementStr, msg, callback) {\r\n\t\t\tvar elem = this.open(elementStr, callback);\r\n\r\n\t\t\telem.querySelector('.popup__inner').innerHTML = '<div class=\"popup__message\">'+ msg +'</div>';\r\n\t\t},\r\n\r\n\t\tclose: function() {\r\n\t\t\tvar elements = document.querySelectorAll('.popup__window');\r\n\r\n\t\t\tif (!elements.length) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\r\n\t\t\t\tif (!elem.classList.contains('popup__window_visible')) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\telem.classList.remove('popup__window_visible');\r\n\t\t\t\telem.parentElement.classList.remove('popup_visible');\r\n\t\t\t}\r\n\r\n\t\t\tif (this.onClose) {\r\n\t\t\t\tthis.onClose();\r\n\t\t\t\tthis.onClose = null;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinit: function(elementStr) {\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar element = e.target.closest(elementStr),\r\n\t\t\t\tcloseElem = e.target.closest('.js-popup-close');\r\n\r\n\t\t\t\tif (element) {\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tthis.open(element.getAttribute('data-popup'));\r\n\t\t\t\t} else if (closeElem || (!e.target.closest('.popup__window') && e.target.closest('.popup'))) {\r\n\t\t\t\t\tthis.fixBody(false);\r\n\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tif (window.location.hash) {\r\n\t\t\t\tthis.open(window.location.hash);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t//popup media\r\n\tMediaPopup = {\r\n\t\timage: function(args) {\r\n\t\t\tvar elemPopup = Popup.open(args.popupStr),\r\n\t\t\telemImg = elemPopup.querySelector('.popup-media__image');\r\n\r\n\t\t\tPopup.onClose = function() {\r\n\t\t\t\telemImg.src = '#';\r\n\t\t\t\telemImg.classList.remove('popup-media__image_visible'); \r\n\t\t\t}\r\n\r\n\t\t\telemImg.src = args.href;\r\n\t\t\telemImg.classList.add('popup-media__image_visible');\r\n\t\t\t\r\n\t\t},\r\n\r\n\t\tvideo: function(args) {\r\n\r\n\t\t},\r\n\r\n\t\tnext: function(elem) {\r\n\t\t\tif (!elem.hasAttribute('data-group')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar group = elem.getAttribute('data-group'),\r\n\t\t\tindex = [].slice.call(document.querySelectorAll('[data-group=\"'+ group +'\"]')).indexOf(elem);\r\n\t\t},\r\n\r\n\t\tinit: function(elementStr) {\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar element = e.target.closest(elementStr);\r\n\r\n\t\t\t\tif (!element) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\tvar type = element.getAttribute('data-type'),\r\n\t\t\t\targs = {\r\n\t\t\t\t\thref: element.href,\r\n\t\t\t\t\tcaption: element.getAttribute('data-caption'),\r\n\t\t\t\t\tgroup: element.getAttribute('data-group'),\r\n\t\t\t\t\tpopupStr: element.getAttribute('data-popup')\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (type == 'image') {\r\n\t\t\t\t\tthis.image(args);\r\n\t\t\t\t} else if (type == 'video') {\r\n\t\t\t\t\tthis.video(args);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.next(element);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\r\n})();\r\n\r\n\r\n\r\n/*var pPopup = {\r\n\tcloseCallback: function() {},\r\n\tplay: null,\r\n\tind: 0,\r\n\tgroup: null,\r\n\tposition: 0,\r\n\r\n\tshow: function(id, fun) {\r\n\t\tvar _ = this,\r\n\t\t$popWin = $(id),\r\n\t\t$popup = $popWin.closest('.popup');\r\n\t\t\r\n\t\tif ($popWin.length && $popWin.hasClass('popup__window')) {\r\n\r\n\t\t\t_.position = $(window).scrollTop();\r\n\t\t\t$popup.fadeIn(321).scrollTop(0);\r\n\t\t\t$('.popup__window').removeClass('popup__window_visible');\r\n\t\t\t$popWin.addClass('popup__window_visible');\r\n\t\t\t$('body').css('top', -_.position).addClass('is-popup-opened');\r\n\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tCoverImg.reInit('#media-popup');\r\n\t\t\t}, 721);\r\n\r\n\t\t}\r\n\r\n\t\t_.closeCallback = fun || function() {};\r\n\t},\r\n\r\n\thide: function() {\r\n\t\tvar _ = this;\r\n\t\t$('.popup__window').removeClass('popup__window_visible');\r\n\t\t$('.popup').fadeOut(321);\r\n\t\t$('.popup__message').remove();\r\n\t\t$('body').removeClass('is-popup-opened').removeAttr('style');\r\n\t\t$('html, body').scrollTop(_.position);\r\n\t\t_.closeCallback();\r\n\t},\r\n\r\n\tmessage: function(id,msg,fun) {\r\n\t\tvar _ = this;\r\n\t\t$(id).find('.popup__inner').prepend('<div class=\"popup__message\">'+ msg +'</div>');\r\n\t\t_.show(id);\r\n\t\t_.closeCallback = fun || function() {};\r\n\t},\r\n\r\n\tresize: function($pop, $img) {\r\n\t\tvar popH = $pop.innerHeight();\r\n\t\tif (popH > window.innerHeight) {\r\n\t\t\t$pop.css('max-width', (window.innerHeight * ($pop.innerWidth() / popH)));\r\n\t\t}\r\n\t},\r\n\r\n\tmedia: function(_$,args,show) {\r\n\t\tvar _ = this,\r\n\t\tid = $(_$).attr('data-popup'),\r\n\t\tPop = $(id),\r\n\t\t$box = Pop.find('.popup-media__box'),\r\n\t\tImg = Pop.find('.popup-media__image'),\r\n\t\tBtnPlay = Pop.find('.popup-media__play'),\r\n\t\tIframe = Pop.find('.popup-media__iframe');\r\n\r\n\t\tif (args.data) {\r\n\t\t\tPop.find('.popup-media__bar').css('display', 'block');\r\n\t\t\tvar data = JSON.parse( args.data );\r\n\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\tPop.find('.popup-media__data-'+ i).html(data[i]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (args.imgSize) {\r\n\t\t\tvar imgSize = JSON.parse(args.imgSize);\r\n\t\t\tImg.attr('width', imgSize[0]).attr('height', imgSize[1]);\r\n\t\t} else {\r\n\t\t\tImg.attr('width', '').attr('height', '');\r\n\t\t}\r\n\r\n\t\tif (args.img) {\r\n\t\t\tImg.css({visibility: 'visible', marginLeft: '', marginTop: ''}).removeClass('cover-img_w cover-img_h').attr('src', args.img);\r\n\t\t}\r\n\t\t\r\n\t\t//Pop.css('max-width', '');\r\n\t\tIframe.css('visibility', 'hidden').attr('src', '');\r\n\t\tBtnPlay.css('visibility', 'hidden');\r\n\t\t\r\n\t\tif (args.vid) {\r\n\t\t\t$box.removeClass('middle').addClass('cover-img-wrap');\r\n\t\t\tImg.removeClass('middle__img').addClass('cover-img');\r\n\t\t\tBtnPlay.css('visibility', 'visible').attr('href', args.vid);\r\n\r\n\t\t\t_.play = function() {\r\n\t\t\t\tvar utm = args.vid.match(/(?:youtu\\.be\\/|youtube\\.com\\/watch\\?v\\=|youtube\\.com\\/embed\\/)+?([\\w-]+)/i),\r\n\t\t\t\tifrSrc = 'https://www.youtube.com/embed/'+ utm[1] +'?autoplay=1';\r\n\t\t\t\tBtnPlay.css('visibility', 'hidden');\r\n\t\t\t\tImg.css('visibility', 'hidden');\r\n\t\t\t\tIframe.css('visibility', 'visible').attr('src', ifrSrc);\r\n\t\t\t}\r\n\r\n\t\t\tif (!args.img) {\r\n\t\t\t\t_.play();\r\n\t\t\t} else {\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tCoverImg.init(id);\r\n\t\t\t\t\tImg.attr('src', args.img);\r\n\t\t\t\t}, 721);\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\r\n\t\t} else {\r\n\t\t\t$box.removeClass('cover-img-wrap').addClass('middle');\r\n\t\t\tImg.removeClass('cover-img').addClass('middle__img');\r\n\t\t}\r\n\r\n\r\n\r\n\t\tif (args.group) {\r\n\t\t\tPop.find('.popup-media__arr').css('display', 'block');\r\n\t\t\t_.group =  $(_$).attr('data-group');\r\n\t\t\t_.ind = $('[data-group=\"'+ _.group +'\"]').index(_$);\r\n\t\t}\r\n\r\n\t\tif (show) {\r\n\t\t\t_.show(id);\r\n\t\t}\r\n\r\n\t\tif (!args.vid) {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t_.resize(Pop, Img);\r\n\t\t\t}, 721);\r\n\t\t}\r\n\r\n\t\t_.closeCallback = function() {\r\n\t\t\tImg.css('visibility', 'hidden').attr('src', '');\r\n\t\t\tIframe.css('visibility', 'hidden').attr('src', '');\r\n\t\t\tBtnPlay.css('visibility', 'hidden');\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tnext: function(dir) {\r\n\t\tvar _ = this,\r\n\t\t$next,\r\n\t\tind = _.ind;\r\n\r\n\t\tif (dir == 'next') {\r\n\t\t\tind++;\r\n\t\t\tif ($('[data-group=\"'+ _.group +'\"]').eq(ind).length) {\r\n\t\t\t\t$next = $('[data-group=\"'+ _.group +'\"]').eq(ind);\r\n\t\t\t}\r\n\t\t} else if (dir == 'prev' && ind > 0) {\r\n\t\t\tind--;\r\n\t\t\tif ($('[data-group=\"'+ _.group +'\"]').eq(ind).length) {\r\n\t\t\t\t$next = $('[data-group=\"'+ _.group +'\"]').eq(ind);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ($next) {\r\n\t\t\tvar args;\r\n\r\n\t\t\tif ($next.hasClass('js-open-popup-image')) {\r\n\t\t\t\targs = {\r\n\t\t\t\t\timg: $next.attr('href'),\r\n\t\t\t\t\timgSize: $next.attr('data-image-size'),\r\n\t\t\t\t\tgroup: $next.attr('data-group'),\r\n\t\t\t\t\tdata: $next.attr('data-data')\r\n\t\t\t\t};\r\n\t\t\t} else if ($next.hasClass('js-open-popup-video')) {\r\n\t\t\t\targs = {\r\n\t\t\t\t\tvid: $next.attr('href'),\r\n\t\t\t\t\timg: $next.attr('data-preview'),\r\n\t\t\t\t\timgSize: $next.attr('data-preview-size'),\r\n\t\t\t\t\tgroup: $next.attr('data-group'),\r\n\t\t\t\t\tdata: $next.attr('data-data')\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\t_.media($next, args);\r\n\t\t\t\r\n\t\t}\r\n\r\n\t}\r\n\r\n};*/\r\n\r\n\r\n/*$(document).ready(function() {\r\n\t$('body').on('click', '.js-open-popup', function () {\r\n\t\tPopup.show($(this).attr('data-popup'));\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.js-open-popup-image', function () {\r\n\t\tvar args = {\r\n\t\t\timg: $(this).attr('href'),\r\n\t\t\timgSize: $(this).attr('data-image-size'),\r\n\t\t\tgroup: $(this).attr('data-group'),\r\n\t\t\tdata: $(this).attr('data-data')\r\n\t\t};\r\n\t\tPopup.media(this, args, true);\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.js-open-popup-video', function () {\r\n\t\tvar args = {\r\n\t\t\tvid: $(this).attr('href'),\r\n\t\t\timg: $(this).attr('data-preview'),\r\n\t\t\timgSize: $(this).attr('data-preview-size'),\r\n\t\t\tgroup: $(this).attr('data-group'),\r\n\t\t\tdata: $(this).attr('data-data')\r\n\t\t};\r\n\t\tPopup.media(this, args, true);\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.popup-media__play', function () {\r\n\t\tPopup.play();\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.popup-media__arr', function () {\r\n\t\tPopup.next($(this).attr('data-dir'));\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.js-open-msg-popup', function () {\r\n\t\tPopup.message('#message-popup', 'Это всплывашка с сообщением.<br> вызов: <span class=\"c-red\">Popup.message(\"#id\", \"Текст или html\");</span>', function() { alert('После закрытия'); });\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.popup__close', function () {\r\n\t\tPopup.hide();\r\n\t\treturn false;\r\n\t});\r\n\r\n\t$('body').on('click', '.popup', function(e) {\r\n\t\tif (!$(e.target).closest('.popup__window').length) {\r\n\t\t\tPopup.hide();\r\n\t\t}\r\n\t});\r\n\r\n\r\n\tif (window.location.hash) {\r\n\t\tvar hash = window.location.hash;\r\n\t\tif($(hash).length && $(hash).hasClass('popup__window')){\r\n\t\t\tPopup.show(hash);\r\n\t\t}\r\n\t}\r\n\r\n});*/","; var Select;\r\n\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\t// custom select\r\n\tSelect = {\r\n\t\tfield: null,\r\n\t\thideCssClass: 'hidden',\r\n\t\tonSelect: null,\r\n\t\t\r\n\t\treset: function (parentElem) {\r\n\t\t\tvar parElem = parentElem || document, \r\n\t\t\tfieldElements = parElem.querySelectorAll('.custom-select'),\r\n\t\t\tbuttonElements = parElem.querySelectorAll('.custom-select__button'),\r\n\t\t\tinputElements = parElem.querySelectorAll('.custom-select__input'),\r\n\t\t\tvalueElements = parElem.querySelectorAll('.custom-select__val');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < fieldElements.length; i++) {\r\n\t\t\t\tfieldElements[i].classList.remove('custom-select_changed');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < buttonElements.length; i++) {\r\n\t\t\t\tbuttonElements[i].innerHTML = buttonElements[i].getAttribute('data-placeholder');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < inputElements.length; i++) {\r\n\t\t\t\tinputElements[i].value = '';\r\n\t\t\t\tinputElements[i].blur();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < valueElements.length; i++) {\r\n\t\t\t\tvalueElements[i].classList.remove('custom-select__val_checked');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tclose: function () {\r\n\t\t\tvar fieldElements = document.querySelectorAll('.custom-select'),\r\n\t\t\toptionsElements = document.querySelectorAll('.custom-select__options');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < fieldElements.length; i++) {\r\n\t\t\t\tfieldElements[i].classList.remove('custom-select_opened');\r\n\t\t\t\toptionsElements[i].classList.remove('ovfauto');\r\n\t\t\t\toptionsElements[i].style.height = 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar listItemElements = document.querySelectorAll('.custom-select__options li');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < listItemElements.length; i++) {\r\n\t\t\t\tlistItemElements[i].classList.remove('hover');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\topen: function () {\r\n\t\t\tthis.field.classList.add('custom-select_opened');\r\n\t\t\t\r\n\t\t\tvar opionsElem = this.field.querySelector('.custom-select__options');\r\n\t\t\t\r\n\t\t\topionsElem.style.height = (opionsElem.scrollHeight + 2) +'px';\r\n\t\t\t\r\n\t\t\topionsElem.scrollTop = 0;\r\n\t\t\t\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\topionsElem.classList.add('ovfauto');\r\n\t\t\t}, 550);\r\n\t\t},\r\n\t\t\r\n\t\tselectMultipleVal: function (elem, button, input) {\r\n\t\t\tvar toButtonValue = [],\r\n\t\t\ttoInputValue = [],\r\n\t\t\tinputsBlock = this.field.querySelector('.custom-select__multiple-inputs');\r\n\t\t\t\r\n\t\t\telem.classList.toggle('custom-select__val_checked');\r\n\t\t\t\r\n\t\t\tvar checkedElements = this.field.querySelectorAll('.custom-select__val_checked');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < checkedElements.length; i++) {\r\n\t\t\t\tvar elem = checkedElements[i];\r\n\t\t\t\t\r\n\t\t\t\ttoButtonValue[i] = elem.innerHTML;\r\n\t\t\t\ttoInputValue[i] = (elem.hasAttribute('data-value')) ? elem.getAttribute('data-value') : elem.innerHTML;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (toButtonValue.length) {\r\n\t\t\t\tbutton.innerHTML = toButtonValue.join(', ');\r\n\t\t\t\t\r\n\t\t\t\tinput.value = toInputValue[0];\r\n\t\t\t\t\r\n\t\t\t\tinputsBlock.innerHTML = '';\r\n\t\t\t\t\r\n\t\t\t\tif (toInputValue.length > 1) {\r\n\t\t\t\t\tfor (var i = 1; i < toInputValue.length; i++) {\r\n\t\t\t\t\t\tvar yetInput = document.createElement('input');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tyetInput.type = 'hidden';\r\n\t\t\t\t\t\tyetInput.name = input.name;\r\n\t\t\t\t\t\tyetInput.value = toInputValue[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tinputsBlock.appendChild(yetInput);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tbutton.innerHTML = button.getAttribute('data-placeholder');\r\n\t\t\t\tinput.value = '';\r\n\t\t\t\tthis.close();\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\ttargetAction: function () {\r\n\t\t\tvar elements = this.field.querySelectorAll('.custom-select__val');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (!elem.hasAttribute('data-target-elements')) continue;\r\n\t\t\t\t\r\n\t\t\t\tvar targetElem = document.querySelector(elem.getAttribute('data-target-elements'));\r\n\t\t\t\t\r\n\t\t\t\tif (elem.classList.contains('custom-select__val_checked')) {\r\n\t\t\t\t\ttargetElem.style.display = 'block';\r\n\t\t\t\t\ttargetElem.classList.remove(this.hideCssClass);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar textInputElement = targetElem.querySelector('input[type=\"text\"]');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (textInputElement) {\r\n\t\t\t\t\t\ttextInputElement.focus();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttargetElem.style.display = 'none';\r\n\t\t\t\t\ttargetElem.classList.add(this.hideCssClass);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tselectVal: function (elem) {\r\n\t\t\tvar button = this.field.querySelector('.custom-select__button'),\r\n\t\t\tinput = this.field.querySelector('.custom-select__input');\r\n\t\t\t\r\n\t\t\tif (this.field.classList.contains('custom-select_multiple')) {\r\n\t\t\t\t\r\n\t\t\t\tthis.selectMultipleVal(elem, button, input);\r\n\t\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tvar toButtonValue = elem.innerHTML,\r\n\t\t\t\ttoInputValue = (elem.hasAttribute('data-value')) ? elem.getAttribute('data-value') : elem.innerHTML;\r\n\t\t\t\t\r\n\t\t\t\tvar valueElements = this.field.querySelectorAll('.custom-select__val');\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < valueElements.length; i++) {\r\n\t\t\t\t\tvalueElements[i].classList.remove('custom-select__val_checked');\r\n\t\t\t\t\tvalueElements[i].disabled = false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\telem.classList.add('custom-select__val_checked');\r\n\t\t\t\telem.disabled = true;\r\n\t\t\t\t\r\n\t\t\t\tif (button) {\r\n\t\t\t\t\tbutton.innerHTML = toButtonValue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tinput.value = toInputValue;\r\n\t\t\t\t\r\n\t\t\t\tthis.close();\r\n\t\t\t\t\r\n\t\t\t\tif (window.Placeholder) {\r\n\t\t\t\t\tPlaceholder.hide(input, true);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (input.getAttribute('data-submit-form-onchange')) {\r\n\t\t\t\t\tForm.submitForm(input.closest('form'));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.onSelect) {\r\n\t\t\t\t\tthis.onSelect(input, toInputValue, elem.getAttribute('data-second-value'));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.targetAction();\r\n\t\t\t\r\n\t\t\tif (input.classList.contains('var-height-textarea__textarea')) {\r\n\t\t\t\tvarHeightTextarea.setHeight(input);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.field.classList.add('custom-select_changed');\r\n\t\t\t\r\n\t\t\tValidateForm.select(input);\r\n\t\t},\r\n\t\t\r\n\t\tautocomplete: function(elem) {\r\n\t\t\tvar match = false,\r\n\t\t\treg = new RegExp(elem.value, 'gi'),\r\n\t\t\tvalueElements = this.field.querySelectorAll('.custom-select__val');\r\n\t\t\t\r\n\t\t\tif (elem.value.length) {\r\n\t\t\t\tfor (var i = 0; i < valueElements.length; i++) {\r\n\t\t\t\t\tvar valueElem = valueElements[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tvalueElem.classList.remove('custom-select__val_checked');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (valueElem.innerHTML.match(reg)) {\r\n\t\t\t\t\t\tvalueElem.parentElement.classList.remove('hidden');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmatch = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvalueElem.parentElement.classList.add('hidden');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!match) {\r\n\t\t\t\tfor (var i = 0; i < valueElements.length; i++) {\r\n\t\t\t\t\tvalueElements[i].parentElement.classList.remove('hidden');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tsetOptions: function (fieldSelector, optObj, nameKey, valKey, secValKey) {\r\n\t\t\tvar fieldElements = document.querySelectorAll(fieldSelector);\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < fieldElements.length; i++) {\r\n\t\t\t\tvar optionsElem = fieldElements[i].querySelector('.custom-select__options');\r\n\t\t\t\t\r\n\t\t\t\toptionsElem.innerHTML = '';\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < optObj.length; i++) {\r\n\t\t\t\t\tvar li = document.createElement('li'),\r\n\t\t\t\t\tsecValAttr = (secValKey != undefined) ? ' data-second-value=\"'+ optObj[i][secValKey] +'\"' : '';\r\n\t\t\t\t\t\r\n\t\t\t\t\tli.innerHTML = '<button type=\"button\" class=\"custom-select__val\" data-value=\"'+ optObj[i][valKey] +'\"'+ secValAttr +'>'+ optObj[i][nameKey] +'</button>';\r\n\t\t\t\t\t\r\n\t\t\t\t\toptionsElem.appendChild(li);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tkeyboard: function (key) {\r\n\t\t\tvar options = this.field.querySelector('.custom-select__options'),\r\n\t\t\thoverItem = options.querySelector('li.hover');\r\n\t\t\t\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 40:\r\n\t\t\t\tif (hoverItem) {\r\n\t\t\t\t\tvar nextItem = function (item) {\r\n\t\t\t\t\t\tvar elem = item.nextElementSibling;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\twhile (elem) {\r\n\t\t\t\t\t\t\tif (!elem) break;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!elemIsHidden(elem)) {\r\n\t\t\t\t\t\t\t\treturn elem;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\telem = elem.nextElementSibling;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}(hoverItem);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nextItem) {\r\n\t\t\t\t\t\thoverItem.classList.remove('hover');\r\n\t\t\t\t\t\tnextItem.classList.add('hover');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptions.scrollTop = options.scrollTop + (nextItem.getBoundingClientRect().top - options.getBoundingClientRect().top);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar elem = options.firstElementChild;\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (elem) {\r\n\t\t\t\t\t\tif (!elem) break;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!elemIsHidden(elem)) {\r\n\t\t\t\t\t\t\telem.classList.add('hover');\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telem = elem.nextElementSibling;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tcase 38:\r\n\t\t\t\tif (hoverItem) {\r\n\t\t\t\t\tvar nextItem = function (item) {\r\n\t\t\t\t\t\tvar elem = item.previousElementSibling;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\twhile (elem) {\r\n\t\t\t\t\t\t\tif (!elem) break;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!elemIsHidden(elem)) {\r\n\t\t\t\t\t\t\t\treturn elem;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\telem = elem.previousElementSibling;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}(hoverItem);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nextItem) {\r\n\t\t\t\t\t\thoverItem.classList.remove('hover');\r\n\t\t\t\t\t\tnextItem.classList.add('hover');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptions.scrollTop = options.scrollTop + (nextItem.getBoundingClientRect().top - options.getBoundingClientRect().top);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar elem = options.lastElementChild;\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile (elem) {\r\n\t\t\t\t\t\tif (!elem) break;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (!elemIsHidden(elem)) {\r\n\t\t\t\t\t\t\telem.classList.add('hover');\r\n\t\t\t\t\t\t\toptions.scrollTop = 9999;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telem = elem.previousElementSibling;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tcase 13:\r\n\t\t\t\tthis.selectVal(hoverItem.querySelector('.custom-select__val'));\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tbuild: function (elementStr) {\r\n\t\t\tvar elements = document.querySelectorAll(elementStr);\r\n\t\t\t\r\n\t\t\tif (!elements.length) return;\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i],\r\n\t\t\t\toptions = elem.querySelectorAll('option'),\r\n\t\t\t\tparent = elem.parentElement,\r\n\t\t\t\toptionsList = '',\r\n\t\t\t\tselectedOption = null;\r\n\t\t\t\t\r\n\t\t\t\t// option list\r\n\t\t\t\tfor (let i = 0; i < options.length; i++) {\r\n\t\t\t\t\tvar opt = options[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (opt.hasAttribute('selected')) {\r\n\t\t\t\t\t\tselectedOption = opt;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t((opt.hasAttribute('data-second-value')) ? ' data-second-value=\"'+ opt.getAttribute('data-second-value') +'\"' : '')\r\n\t\t\t\t\t\r\n\t\t\t\t\toptionsList += '<li><button type=\"button\" class=\"custom-select__val'+ ((opt.hasAttribute('selected')) ? ' custom-select__val_checked' : '') +'\"'+ ( (opt.hasAttribute('value')) ? ' data-value=\"'+ opt.value +'\"' : '') + ((opt.hasAttribute('data-second-value')) ? ' data-second-value=\"'+ opt.getAttribute('data-second-value') +'\"' : '') + ( (opt.hasAttribute('data-target-elements')) ? ' data-target-elements=\"'+ opt.getAttribute('data-target-elements') +'\"' : '') + ((opt.hasAttribute('selected')) ? ' disabled' : '') +'>'+ opt.innerHTML +'</button></li>';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar require = (elem.hasAttribute('data-required')) ? ' data-required=\"'+ elem.getAttribute('data-required') +'\" ' : '',\r\n\t\t\t\tplaceholder = elem.getAttribute('data-placeholder'),\r\n\t\t\t\tsubmitOnChange = (elem.hasAttribute('data-submit-form-onchange')) ? ' data-submit-form-onchange=\"'+ elem.getAttribute('data-submit-form-onchange') +'\" ' : '',\r\n\t\t\t\thead;\r\n\t\t\t\t\r\n\t\t\t\tif (elem.getAttribute('data-type') == 'autocomplete') {\r\n\t\t\t\t\thead = '<button type=\"button\" class=\"custom-select__arr\"></button><input type=\"text\" name=\"'+ elem.name +'\"'+ require + ((placeholder) ? ' placeholder=\"'+ placeholder +'\" ' : '') +'class=\"custom-select__input custom-select__autocomplete form__text-input\" value=\"'+ ((selectedOption) ? selectedOption.innerHTML : '') +'\">';\r\n\t\t\t\t} else {\r\n\t\t\t\t\thead = '<button type=\"button\"'+ ((placeholder) ? ' data-placeholder=\"'+ placeholder +'\"' : '') +' class=\"custom-select__button\">'+ ((selectedOption) ? selectedOption.innerHTML : (placeholder) ? placeholder : '') +'</button>';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar multiple = {\r\n\t\t\t\t\tclass: (elem.multiple) ? ' custom-select_multiple' : '',\r\n\t\t\t\t\tinpDiv: (elem.multiple) ? '<div class=\"custom-select__multiple-inputs\"></div>' : ''\r\n\t\t\t\t},\r\n\t\t\t\thiddenInp = (elem.getAttribute('data-type') != 'autocomplete') ? '<input type=\"hidden\" name=\"'+ elem.name +'\"'+ require + submitOnChange +'class=\"custom-select__input\" value=\"'+ ((selectedOption) ? selectedOption.value : '') +'\">' : '';\r\n\t\t\t\t\r\n\t\t\t\t// output select\r\n\t\t\t\tvar customElem = document.createElement('div');\r\n\t\t\t\tcustomElem.className = 'custom-select'+ multiple.class + ((selectedOption) ? ' custom-select_changed' : '');\r\n\t\t\t\tcustomElem.innerHTML = head +'<ul class=\"custom-select__options\">'+ optionsList +'</ul>'+ hiddenInp + multiple.inpDiv;\r\n\t\t\t\tparent.insertBefore(customElem, parent.firstChild);\r\n\t\t\t\tparent.removeChild(parent.children[1]);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function (elementStr) {\r\n\t\t\tthis.build(elementStr);\r\n\t\t\t\r\n\t\t\t// click on select or value or arrow button\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar btnElem = e.target.closest('.custom-select__button'),\r\n\t\t\t\tvalElem = e.target.closest('.custom-select__val'),\r\n\t\t\t\tarrElem = e.target.closest('.custom-select__arr');\r\n\t\t\t\t\r\n\t\t\t\tif (btnElem) {\r\n\t\t\t\t\tthis.field = btnElem.closest('.custom-select');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (this.field.classList.contains('custom-select_opened')) {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.open();\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (valElem) {\r\n\t\t\t\t\tthis.field = valElem.closest('.custom-select');\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.selectVal(valElem);\r\n\t\t\t\t} else if (arrElem) {\r\n\t\t\t\t\tif (!arrElem.closest('.custom-select_opened')) {\r\n\t\t\t\t\t\tarrElem.closest('.custom-select').querySelector('.custom-select__autocomplete').focus();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t//focus autocomplete\r\n\t\t\tdocument.addEventListener('focus', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('.custom-select__autocomplete');\r\n\t\t\t\t\r\n\t\t\t\tif (!elem) return;\r\n\t\t\t\t\r\n\t\t\t\tthis.field = elem.closest('.custom-select');\r\n\t\t\t\t\r\n\t\t\t\tthis.close();\r\n\t\t\t\t\r\n\t\t\t\tthis.open();\r\n\t\t\t}, true);\r\n\t\t\t\r\n\t\t\t//input autocomplete\r\n\t\t\tdocument.addEventListener('input', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('.custom-select__autocomplete');\r\n\t\t\t\t\r\n\t\t\t\tif (!elem) return;\r\n\t\t\t\t\r\n\t\t\t\tthis.field = elem.closest('.custom-select');\r\n\t\t\t\t\r\n\t\t\t\tthis.autocomplete(elem);\r\n\t\t\t\t\r\n\t\t\t\tif (!this.field.classList.contains('custom-select_opened')) {\r\n\t\t\t\t\tthis.open();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// keyboard events\r\n\t\t\tdocument.addEventListener('keydown', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('.custom-select_opened');\r\n\t\t\t\t\r\n\t\t\t\tif (!elem) return;\r\n\t\t\t\t\r\n\t\t\t\tthis.field = elem.closest('.custom-select');\r\n\t\t\t\t\r\n\t\t\t\tvar key = e.which || e.keyCode || 0;\r\n\t\t\t\t\r\n\t\t\t\tif (key == 40 || key == 38 || key == 13) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.keyboard(key);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// close all\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tif (!e.target.closest('.custom-select_opened')) {\r\n\t\t\t\t\tthis.close();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// init scripts\r\n\tdocument.addEventListener('DOMContentLoaded', function () {\r\n\t\tSelect.init('select');\r\n\t});\r\n})();","; var AutoComplete;\r\n\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\tAutoComplete = {\r\n\t\tfieldElem: null,\r\n\t\tinputElem: null,\r\n\t\toptionsElem: null,\r\n\t\tvaluesData: null,\r\n\t\tsetValuesData: null,\r\n\t\t\r\n\t\topen: function () {\r\n\t\t\tthis.fieldElem.classList.add('autocomplete_opened');\r\n\t\t\t\r\n\t\t\tvar optionsElem = this.optionsElem;\r\n\t\t\t\r\n\t\t\toptionsElem.style.height = optionsElem.scrollHeight +'px';\r\n\t\t\t\r\n\t\t\toptionsElem.scrollTop = 0;\r\n\t\t\t\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tif (optionsElem.scrollHeight > optionsElem.offsetHeight) {\r\n\t\t\t\t\toptionsElem.classList.add('ovfauto');\r\n\t\t\t\t}\r\n\t\t\t}, 550);\r\n\t\t},\r\n\t\t\r\n\t\tclose: function () {\r\n\t\t\tthis.fieldElem.classList.remove('autocomplete_opened');\r\n\t\t\t\r\n\t\t\tvar optionsElem = this.optionsElem;\r\n\t\t\t\r\n\t\t\toptionsElem.classList.remove('ovfauto');\r\n\t\t\t\r\n\t\t\toptionsElem.style.height = 0;\r\n\t\t},\r\n\t\t\r\n\t\tgetValues: function () {\r\n\t\t\tvar optionsElem = this.optionsElem;\r\n\t\t\t\r\n\t\t\tif (this.inputElem.value.length) {\r\n\t\t\t\tvar preReg = new RegExp(this.inputElem.value, 'i'),\r\n\t\t\t\tvalues = '';\r\n\t\t\t\t\r\n\t\t\t\tif (this.setValuesData) {\r\n\t\t\t\t\tthis.setValuesData(this.inputElem.value, (valuesData) => {\r\n\t\t\t\t\t\tfor (var i = 0; i < valuesData.length; i++) {\r\n\t\t\t\t\t\t\tvar dataVal = valuesData[i];\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (dataVal.value.match(preReg)) {\r\n\t\t\t\t\t\t\t\tvalues += '<li><button type=\"button\" class=\"autocomplete__val\">'+ dataVal.value +'</button></li>';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (values == '') {\r\n\t\t\t\t\t\t\tvalues = '<li>Nothing found!</li>';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptionsElem.innerHTML = values;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.open();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\toptionsElem.innerHTML = '';\r\n\t\t\t\t\r\n\t\t\t\tthis.close();\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tselectVal: function (itemElem) {\r\n\t\t\tvar valueElem = itemElem.querySelector('.autocomplete__val');\r\n\t\t\t\r\n\t\t\tif (valueElem) {\r\n\t\t\t\tthis.inputElem.value = valueElem.innerHTML;\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tkeybinding: function (e) {\r\n\t\t\tvar key = e.which || e.keyCode || 0;\r\n\t\t\t\r\n\t\t\tif (key != 40 && key != 38 && key != 13) return;\r\n\t\t\t\r\n\t\t\te.preventDefault();\r\n\t\t\t\r\n\t\t\tvar optionsElem = this.optionsElem,\r\n\t\t\thoverItem = optionsElem.querySelector('li.hover');\r\n\t\t\t\r\n\t\t\tswitch (key) {\r\n\t\t\t\tcase 40:\r\n\t\t\t\tif (hoverItem) {\r\n\t\t\t\t\tvar nextItem = hoverItem.nextElementSibling;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nextItem) {\r\n\t\t\t\t\t\thoverItem.classList.remove('hover');\r\n\t\t\t\t\t\tnextItem.classList.add('hover');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptionsElem.scrollTop = optionsElem.scrollTop + (nextItem.getBoundingClientRect().top - optionsElem.getBoundingClientRect().top);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.selectVal(nextItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar nextItem = optionsElem.firstElementChild;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nextItem) {\r\n\t\t\t\t\t\tnextItem.classList.add('hover');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.selectVal(nextItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tcase 38:\r\n\t\t\t\tif (hoverItem) {\r\n\t\t\t\t\tvar nextItem = hoverItem.previousElementSibling;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nextItem) {\r\n\t\t\t\t\t\thoverItem.classList.remove('hover');\r\n\t\t\t\t\t\tnextItem.classList.add('hover');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptionsElem.scrollTop = optionsElem.scrollTop + (nextItem.getBoundingClientRect().top - optionsElem.getBoundingClientRect().top);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.selectVal(nextItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar nextItem = optionsElem.lastElementChild;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (nextItem) {\r\n\t\t\t\t\t\tnextItem.classList.add('hover');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\toptionsElem.scrollTop = 9999;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.selectVal(nextItem);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\t\tcase 13:\r\n\t\t\t\tif (hoverItem) {\r\n\t\t\t\t\tthis.selectVal(hoverItem);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.inputElem.blur();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function () {\r\n\t\t\t// focus event\r\n\t\t\tdocument.addEventListener('focus', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('.autocomplete__input');\r\n\t\t\t\t\r\n\t\t\t\tif (!elem) return;\r\n\t\t\t\t\r\n\t\t\t\tthis.fieldElem = elem.closest('.autocomplete');\r\n\t\t\t\tthis.inputElem = elem;\r\n\t\t\t\tthis.optionsElem = this.fieldElem.querySelector('.autocomplete__options');\r\n\t\t\t\t\r\n\t\t\t\tthis.getValues();\r\n\t\t\t}, true);\r\n\t\t\t\r\n\t\t\t// blur event\r\n\t\t\tdocument.addEventListener('blur', (e) => {\r\n\t\t\t\tif (e.target.closest('.autocomplete__input')) {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.close();\r\n\t\t\t\t\t}, 21);\r\n\t\t\t\t}\r\n\t\t\t}, true);\r\n\t\t\t\r\n\t\t\t// input event\r\n\t\t\tdocument.addEventListener('input', (e) => {\r\n\t\t\t\tif (e.target.closest('.autocomplete__input')) {\r\n\t\t\t\t\tthis.getValues();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// click event\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('.autocomplete__val');\r\n\t\t\t\t\r\n\t\t\t\tif (elem) {\r\n\t\t\t\t\tthis.selectVal(elem.parentElement);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// keyboard events\r\n\t\t\tdocument.addEventListener('keydown', (e) => {\r\n\t\t\t\tif (e.target.closest('.autocomplete_opened')) {\r\n\t\t\t\t\tthis.keybinding(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// init scripts\r\n\tdocument.addEventListener('DOMContentLoaded', function () {\r\n\t\tAutoComplete.init();\r\n\t});\r\n})();","var ValidateForm, Form;\r\n\r\n(function () {\r\n\t'use strict';\r\n\t\r\n\t// validate form\r\n\tValidateForm = {\r\n\t\tinput: null,\r\n\t\t\r\n\t\terrorTip: function (err, errInd, errorTxt) {\r\n\t\t\tconst field = this.input.closest('.form__field') || this.input.parentElement,\r\n\t\t\terrTip = field.querySelector('.field-error-tip');\r\n\t\t\t\r\n\t\t\tif (err) {\r\n\t\t\t\tfield.classList.remove('field-success');\r\n\t\t\t\tfield.classList.add('field-error');\r\n\t\t\t\t\r\n\t\t\t\tif (!errTip) return;\r\n\t\t\t\t\r\n\t\t\t\tif (errInd) {\r\n\t\t\t\t\tif (!errTip.hasAttribute('data-error-text')) {\r\n\t\t\t\t\t\terrTip.setAttribute('data-error-text', errTip.innerHTML);\r\n\t\t\t\t\t}\r\n\t\t\t\t\terrTip.innerHTML = (errInd != 'custom') ? errTip.getAttribute('data-error-text-'+ errInd) : errorTxt;\r\n\t\t\t\t} else if (errTip.hasAttribute('data-error-text')) {\r\n\t\t\t\t\terrTip.innerHTML = errTip.getAttribute('data-error-text');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfield.classList.remove('field-error');\r\n\t\t\t\tfield.classList.add('field-success');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tcustomErrorTip: function (input, errorTxt) {\r\n\t\t\tif (!input) return;\r\n\t\t\t\r\n\t\t\tthis.input = input;\r\n\t\t\t\r\n\t\t\tthis.errorTip(true, 'custom', errorTxt);\r\n\t\t},\r\n\t\t\r\n\t\ttxt: function () {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tif (!/^[0-9a-zа-яё_,.:;@-\\s]*$/i.test(this.input.value)) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tnum: function () {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tif (!/^[0-9.,-]*$/.test(this.input.value)) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tname: function () {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tif (!/^[a-zа-яё'-]{3,21}(\\s[a-zа-яё'-]{3,21})?(\\s[a-zа-яё'-]{3,21})?$/i.test(this.input.value)) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tdate: function () {\r\n\t\t\tvar err = false, \r\n\t\t\terrDate = false, \r\n\t\t\tmatches = this.input.value.match(/^(\\d{2}).(\\d{2}).(\\d{4})$/);\r\n\t\t\t\r\n\t\t\tif (!matches) {\r\n\t\t\t\terrDate = 1;\r\n\t\t\t} else {\r\n\t\t\t\tvar compDate = new Date(matches[3], (matches[2] - 1), matches[1]),\r\n\t\t\t\tcurDate = new Date();\r\n\t\t\t\t\r\n\t\t\t\tif (this.input.hasAttribute('data-min-years-passed')) {\r\n\t\t\t\t\tvar interval = curDate.valueOf() - new Date(curDate.getFullYear() - (+this.input.getAttribute('data-min-years-passed')), curDate.getMonth(), curDate.getDate()).valueOf();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (curDate.valueOf() < compDate.valueOf() || (curDate.getFullYear() - matches[3]) > 100) {\r\n\t\t\t\t\t\terrDate = 1;\r\n\t\t\t\t\t} else if ((curDate.valueOf() - compDate.valueOf()) < interval) {\r\n\t\t\t\t\t\terrDate = 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (compDate.getFullYear() != matches[3] || compDate.getMonth() != (matches[2] - 1) || compDate.getDate() != matches[1]) {\r\n\t\t\t\t\terrDate = 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (errDate == 1) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else if (errDate == 2) {\r\n\t\t\t\tthis.errorTip(true, 3);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\temail: function () {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tif (!/^[a-z0-9]+[\\w\\-\\.]*@[\\w\\-]{2,}\\.[a-z]{2,6}$/i.test(this.input.value)) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\turl: function () {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tif (!/^(https?\\:\\/\\/)?[a-zа-я0-9\\-\\.]+\\.[a-zа-я]{2,11}$/i.test(this.input.value)) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\ttel: function () {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tif (!/^\\+7\\([0-9]{3}\\)[0-9]{3}-[0-9]{2}-[0-9]{2}$/.test(this.input.value)) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tpass: function () {\r\n\t\t\tvar err = false,\r\n\t\t\tminLng = this.input.getAttribute('data-min-length');\r\n\t\t\t\r\n\t\t\tif (minLng && this.input.value.length < minLng) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tcheckbox: function (elem) {\r\n\t\t\tthis.input = elem;\r\n\t\t\t\r\n\t\t\tvar group = elem.closest('.form__chbox-group');\r\n\t\t\t\r\n\t\t\tif (group && group.getAttribute('data-tested')) {\r\n\t\t\t\tvar checkedElements = 0,\r\n\t\t\t\telements = group.querySelectorAll('input[type=\"checkbox\"]');\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tif (elements[i].checked) {\r\n\t\t\t\t\t\tcheckedElements++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (checkedElements < group.getAttribute('data-min')) {\r\n\t\t\t\t\tgroup.classList.add('form__chbox-group_error');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgroup.classList.remove('form__chbox-group_error');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t} else if (elem.getAttribute('data-tested')) {\r\n\t\t\t\tif (elem.getAttribute('data-required') && !elem.checked) {\r\n\t\t\t\t\tthis.errorTip(true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tradio: function (elem) {\r\n\t\t\tthis.input = elem;\r\n\t\t\t\r\n\t\t\tvar checkedElement = false,\r\n\t\t\tgroup = elem.closest('.form__radio-group'),\r\n\t\t\telements = group.querySelectorAll('input[type=\"radio\"]');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tif (elements[i].checked) {\r\n\t\t\t\t\tcheckedElement = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (!checkedElement) {\r\n\t\t\t\tgroup.classList.add('form__radio-group_error');\r\n\t\t\t} else {\r\n\t\t\t\tgroup.classList.remove('form__radio-group_error');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tselect: function (elem) {\r\n\t\t\tvar err = false;\r\n\t\t\t\r\n\t\t\tthis.input = elem;\r\n\t\t\t\r\n\t\t\tif (elem.getAttribute('data-required') && !elem.value.length) {\r\n\t\t\t\tthis.errorTip(true);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tfile: function (elem, filesArr) {\r\n\t\t\tthis.input = elem;\r\n\t\t\t\r\n\t\t\tvar err = false,\r\n\t\t\terrCount = {ext: 0, size: 0},\r\n\t\t\tmaxFiles = +this.input.getAttribute('data-max-files'),\r\n\t\t\textRegExp = new RegExp('(?:\\\\.'+ this.input.getAttribute('data-ext').replace(/,/g, '|\\\\.') +')$', 'i'),\r\n\t\t\tmaxSize = +this.input.getAttribute('data-max-size'),\r\n\t\t\tfileItemElements = this.input.closest('.custom-file').querySelectorAll('.custom-file__item');;\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < filesArr.length; i++) {\r\n\t\t\t\tvar file = filesArr[i];\r\n\t\t\t\t\r\n\t\t\t\tif (!file.name.match(extRegExp)) {\r\n\t\t\t\t\terrCount.ext++;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (fileItemElements[i]) {\r\n\t\t\t\t\t\tfileItemElements[i].classList.add('file-error');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (file.size > maxSize) {\r\n\t\t\t\t\terrCount.size++;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (fileItemElements[i]) {\r\n\t\t\t\t\t\tfileItemElements[i].classList.add('file-error');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (maxFiles && filesArr.length > maxFiles) {\r\n\t\t\t\tthis.errorTip(true, 4);\r\n\t\t\t\terr = true;\r\n\t\t\t} else if (errCount.ext) {\r\n\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\terr = true;\r\n\t\t\t} else if (errCount.size) {\r\n\t\t\t\tthis.errorTip(true, 3);\r\n\t\t\t\terr = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn err;\r\n\t\t},\r\n\t\t\r\n\t\tvalidateOnInput: function (elem) {\r\n\t\t\tthis.input = elem;\r\n\t\t\t\r\n\t\t\tvar dataType = elem.getAttribute('data-type');\r\n\t\t\t\r\n\t\t\tif (elem.getAttribute('data-required') && !elem.value.length) {\r\n\t\t\t\tthis.errorTip(true);\r\n\t\t\t} else if (elem.value.length) {\r\n\t\t\t\tif (dataType) {\r\n\t\t\t\t\tthis[dataType]();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.errorTip(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tvalidate: function (formElem) {\r\n\t\t\tvar err = 0;\r\n\t\t\t\r\n\t\t\t// text, password, textarea\r\n\t\t\tvar elements = formElem.querySelectorAll('input[type=\"text\"], input[type=\"password\"], textarea');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(elem)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.input = elem;\r\n\t\t\t\t\r\n\t\t\t\telem.setAttribute('data-tested', 'true');\r\n\t\t\t\t\r\n\t\t\t\tvar dataType = elem.getAttribute('data-type');\r\n\t\t\t\t\r\n\t\t\t\tif (elem.getAttribute('data-required') && !elem.value.length) {\r\n\t\t\t\t\tthis.errorTip(true);\r\n\t\t\t\t\terr++;\r\n\t\t\t\t} else if (elem.value.length) {\r\n\t\t\t\t\tif (dataType) {\r\n\t\t\t\t\t\tif (this[dataType]()) {\r\n\t\t\t\t\t\t\terr++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// select\r\n\t\t\tvar elements = formElem.querySelectorAll('.custom-select__input');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(elem.parentElement)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (this.select(elem)) {\r\n\t\t\t\t\terr++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// checkboxes\r\n\t\t\tvar elements = formElem.querySelectorAll('input[type=\"checkbox\"]');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(elem)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.input = elem;\r\n\t\t\t\t\r\n\t\t\t\telem.setAttribute('data-tested', 'true');\r\n\t\t\t\t\r\n\t\t\t\tif (elem.getAttribute('data-required') && !elem.checked) {\r\n\t\t\t\t\tthis.errorTip(true);\r\n\t\t\t\t\terr++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// checkbox group\r\n\t\t\tvar groups = formElem.querySelectorAll('.form__chbox-group');\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < groups.length; i++) {\r\n\t\t\t\tvar group = groups[i],\r\n\t\t\t\tcheckedElements = 0;\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(group)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tgroup.setAttribute('data-tested', 'true');\r\n\t\t\t\t\r\n\t\t\t\tvar elements = group.querySelectorAll('input[type=\"checkbox\"]');\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tif (elements[i].checked) {\r\n\t\t\t\t\t\tcheckedElements++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (checkedElements < group.getAttribute('data-min')) {\r\n\t\t\t\t\tgroup.classList.add('form__chbox-group_error');\r\n\t\t\t\t\terr++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgroup.classList.remove('form__chbox-group_error');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// radio group\r\n\t\t\tvar groups = formElem.querySelectorAll('.form__radio-group');\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < groups.length; i++) {\r\n\t\t\t\tvar group = groups[i],\r\n\t\t\t\tcheckedElement = false;\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(group)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tgroup.setAttribute('data-tested', 'true');\r\n\t\t\t\t\r\n\t\t\t\tvar elements = group.querySelectorAll('input[type=\"radio\"]');\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tif (elements[i].checked) {\r\n\t\t\t\t\t\tcheckedElement = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!checkedElement) {\r\n\t\t\t\t\tgroup.classList.add('form__radio-group_error');\r\n\t\t\t\t\terr++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tgroup.classList.remove('form__radio-group_error');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// file\r\n\t\t\tvar elements = formElem.querySelectorAll('input[type=\"file\"]');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(elem)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.input = elem;\r\n\t\t\t\t\r\n\t\t\t\tif (CustomFile.inputFiles(elem).length) {\r\n\t\t\t\t\tif (this.file(elem, CustomFile.inputFiles(elem))) {\r\n\t\t\t\t\t\terr++;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (elem.getAttribute('data-required')) {\r\n\t\t\t\t\tthis.errorTip(true);\r\n\t\t\t\t\terr++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// passwords compare\r\n\t\t\tvar elements = formElem.querySelectorAll('input[data-pass-compare-input]');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\r\n\t\t\t\tif (elemIsHidden(elem)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.input = elem;\r\n\t\t\t\t\r\n\t\t\t\tvar val = elem.value;\r\n\t\t\t\t\r\n\t\t\t\tif (val.length) {\r\n\t\t\t\t\tvar compElemVal = formElem.querySelector(elem.getAttribute('data-pass-compare-input')).value;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (val !== compElemVal) {\r\n\t\t\t\t\t\tthis.errorTip(true, 2);\r\n\t\t\t\t\t\terr++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.errorTip(false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (err) {\r\n\t\t\t\tformElem.classList.add('form-error');\r\n\t\t\t} else {\r\n\t\t\t\tformElem.classList.remove('form-error');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn (err) ? false : true;\r\n\t\t},\r\n\t\t\r\n\t\tinit: function (formSelector) {\r\n\t\t\tdocument.addEventListener('input', (e) => {\r\n\t\t\t\tvar elem = e.target.closest(formSelector +' input[type=\"text\"],'+ formSelector +' input[type=\"password\"],'+ formSelector +' textarea');\r\n\t\t\t\t\r\n\t\t\t\tif (elem && elem.hasAttribute('data-tested')) {\r\n\t\t\t\t\tthis.validateOnInput(elem);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tdocument.addEventListener('change', (e) => {\r\n\t\t\t\tvar elem = e.target.closest(formSelector +' input[type=\"radio\"],'+ formSelector +' input[type=\"checkbox\"]');\r\n\t\t\t\t\r\n\t\t\t\tif (elem) {\r\n\t\t\t\t\tthis[elem.type](elem);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// variable height textarea\r\n\tvar varHeightTextarea = {\r\n\t\tsetHeight: function (elem) {\r\n\t\t\tvar mirror = elem.parentElement.querySelector('.var-height-textarea__mirror'),\r\n\t\t\tmirrorOutput = elem.value.replace(/\\n/g, '<br>');\r\n\t\t\t\r\n\t\t\tmirror.innerHTML = mirrorOutput +'&nbsp;';\r\n\t\t},\r\n\t\t\r\n\t\tinit: function () {\r\n\t\t\tdocument.addEventListener('input', (e) => {\r\n\t\t\t\tvar elem = e.target.closest('.var-height-textarea__textarea');\r\n\t\t\t\t\r\n\t\t\t\tif (!elem) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.setHeight(elem);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// next fieldset\r\n\tvar NextFieldset = {\r\n\t\tnext: function (btnElem, fwd) {\r\n\t\t\tvar nextFieldset = (btnElem.hasAttribute('data-go-to-fieldset')) ? document.querySelector(btnElem.getAttribute('data-go-to-fieldset')) : null;\r\n\t\t\t\r\n\t\t\tif (!nextFieldset) return;\r\n\t\t\t\r\n\t\t\tvar currentFieldset = btnElem.closest('.fieldset__item'),\r\n\t\t\tgoTo = (fwd) ? ValidateForm.validate(currentFieldset) : true;\r\n\t\t\t\r\n\t\t\tif (goTo) {\r\n\t\t\t\tcurrentFieldset.classList.add('fieldset__item_hidden');\r\n\t\t\t\tnextFieldset.classList.remove('fieldset__item_hidden');\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function (nextBtnSelector, prevBtnSelector) {\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar nextBtnElem = e.target.closest(nextBtnSelector),\r\n\t\t\t\tprevBtnElem = e.target.closest(prevBtnSelector);\r\n\t\t\t\t\r\n\t\t\t\tif (nextBtnElem) {\r\n\t\t\t\t\tthis.next(nextBtnElem, true);\r\n\t\t\t\t} else if (prevBtnElem) {\r\n\t\t\t\t\tthis.next(prevBtnElem, false);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// form\r\n\tForm = {\r\n\t\tonSubmit: null,\r\n\t\t\r\n\t\tsubmitForm: function (formElem, e) {\r\n\t\t\tif (!ValidateForm.validate(formElem)) {\r\n\t\t\t\tif (e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tformElem.classList.add('form_sending');\r\n\t\t\t\r\n\t\t\tif (!this.onSubmit) {\r\n\t\t\t\tformElem.submit();\r\n\t\t\t\t\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// clear form\r\n\t\t\tfunction clear() {\r\n\t\t\t\tvar elements = formElem.querySelectorAll('input[type=\"text\"], input[type=\"password\"], textarea');\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\telem.value = '';\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (window.Placeholder) {\r\n\t\t\t\t\t\tPlaceholder.hide(elem, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (window.Select) {\r\n\t\t\t\t\tSelect.reset();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar textareaMirrors = formElem.querySelectorAll('.form__textarea-mirror');\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < textareaMirrors.length; i++) {\r\n\t\t\t\t\ttextareaMirrors[i].innerHTML = '';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// submit button\r\n\t\t\tfunction actSubmitBtn(st) {\r\n\t\t\t\tvar elements = formElem.querySelectorAll('button[type=\"submit\"], input[type=\"submit\"]');\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\t\t\tvar elem = elements[i];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!elemIsHidden(elem)) {\r\n\t\t\t\t\t\tif (st) {\r\n\t\t\t\t\t\t\telem.removeAttribute('disabled');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\telem.setAttribute('disabled', 'disable');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// call onSubmit\r\n\t\t\tconst ret = this.onSubmit(formElem, function (obj) {\r\n\t\t\t\tobj = obj || {};\r\n\t\t\t\t\r\n\t\t\t\tactSubmitBtn(obj.unlockSubmitButton);\r\n\t\t\t\t\r\n\t\t\t\tformElem.classList.remove('form_sending');\r\n\t\t\t\t\r\n\t\t\t\tif (obj.clearForm == true) {\r\n\t\t\t\t\tclear();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif (ret === false) {\r\n\t\t\t\tif (e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tactSubmitBtn(false);\r\n\t\t\t} else {\r\n\t\t\t\tformElem.submit();\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function (formSelector) {\r\n\t\t\tif (!document.querySelector(formSelector)) return;\r\n\t\t\t\r\n\t\t\tValidateForm.init(formSelector);\r\n\t\t\t\r\n\t\t\t// submit event\r\n\t\t\tdocument.addEventListener('submit', (e) => {\r\n\t\t\t\tvar formElem = e.target.closest(formSelector);\r\n\t\t\t\t\r\n\t\t\t\tif (formElem) {\r\n\t\t\t\t\tthis.submitForm(formElem, e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// keyboard event\r\n\t\t\tdocument.addEventListener('keydown', (e) => {\r\n\t\t\t\tvar formElem = e.target.closest(formSelector);\r\n\t\t\t\t\r\n\t\t\t\tif (!formElem) return;\r\n\t\t\t\t\r\n\t\t\t\tvar key = e.which || e.keyCode || 0;\r\n\t\t\t\t\r\n\t\t\t\tif (e.ctrlKey && key == 13) {\r\n\t\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t\tthis.submitForm(formElem, e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// bind labels\r\n\tfunction BindLabels(elementsStr) {\r\n\t\tvar elements = document.querySelectorAll(elementsStr);\r\n\t\t\r\n\t\tfor (var i = 0; i < elements.length; i++) {\r\n\t\t\tvar elem = elements[i],\r\n\t\t\tlabel = elem.parentElement.querySelector('label'),\r\n\t\t\tforID = (elem.hasAttribute('id')) ? elem.id : 'keylabel-'+ i;\r\n\t\t\t\r\n\t\t\tif (label && !label.hasAttribute('for')) {\r\n\t\t\t\tlabel.htmlFor = forID;\r\n\t\t\t\telem.id = forID;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t// duplicate form\r\n\tvar DuplicateForm = {\r\n\t\tadd: function (btnElem) {\r\n\t\t\tvar modelElem = (btnElem.hasAttribute('data-form-model')) ? document.querySelector(btnElem.getAttribute('data-form-model')) : null,\r\n\t\t\tdestElem = (btnElem.hasAttribute('data-duplicated-dest')) ? document.querySelector(btnElem.getAttribute('data-duplicated-dest')) : null;\r\n\t\t\t\r\n\t\t\tif (!modelElem || !destElem) return;\r\n\t\t\t\r\n\t\t\tvar duplicatedDiv = document.createElement('div');\r\n\t\t\t\r\n\t\t\tduplicatedDiv.className = 'duplicated';\r\n\t\t\t\r\n\t\t\tduplicatedDiv.innerHTML = modelElem.innerHTML;\r\n\t\t\t\r\n\t\t\tdestElem.appendChild(duplicatedDiv);\r\n\t\t\t\r\n\t\t\tvar dupicatedElements = destElem.querySelectorAll('.duplicated');\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < dupicatedElements.length; i++) {\r\n\t\t\t\tvar dupicatedElem = dupicatedElements[i],\r\n\t\t\t\tlabelElements = dupicatedElem.querySelectorAll('label'),\r\n\t\t\t\tinputElements = dupicatedElem.querySelectorAll('input');\r\n\t\t\t\t\r\n\t\t\t\tfor (var j = 0; j < labelElements.length; j++) {\r\n\t\t\t\t\tvar elem = labelElements[j];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (elem.htmlFor != '') {\r\n\t\t\t\t\t\telem.htmlFor += '-'+ i +'-'+ j;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tfor (var j = 0; j < inputElements.length; j++) {\r\n\t\t\t\t\tvar elem = inputElements[j];\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (elem.id != '') {\r\n\t\t\t\t\t\telem.id += '-'+ i +'-'+ j;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tremove: function (btnElem) {\r\n\t\t\tvar duplElem =  btnElem.closest('.duplicated');\r\n\t\t\t\r\n\t\t\tif (duplElem) {\r\n\t\t\t\tduplElem.innerHTML = '';\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\tinit: function (addBtnSelector, removeBtnSelector) {\r\n\t\t\tdocument.addEventListener('click', (e) => {\r\n\t\t\t\tvar addBtnElem = e.target.closest(addBtnSelector),\r\n\t\t\t\tremoveBtnElem = e.target.closest(removeBtnSelector);\r\n\t\t\t\t\r\n\t\t\t\tif (addBtnElem) {\r\n\t\t\t\t\tthis.add(addBtnElem);\r\n\t\t\t\t} else if (removeBtnElem) {\r\n\t\t\t\t\tthis.remove(removeBtnElem);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t\r\n\t// set tabindex\r\n\t/*function SetTabindex(elementsStr) {\r\n\t\tvar elements = document.querySelectorAll(elementsStr);\r\n\t\t\r\n\t\tfor (let i = 0; i < elements.length; i++) {\r\n\t\t\tvar elem = elements[i];\r\n\t\t\t\r\n\t\t\tif (!elemIsHidden(elem)) {\r\n\t\t\t\telem.setAttribute('tabindex', i + 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}*/\r\n\t\r\n\t// init scripts\r\n\tdocument.addEventListener('DOMContentLoaded', function () {\r\n\t\tBindLabels('input[type=\"text\"], input[type=\"checkbox\"], input[type=\"radio\"]');\r\n\t\t// SetTabindex('input[type=\"text\"], input[type=\"password\"], textarea');\r\n\t\tvarHeightTextarea.init();\r\n\t\tNextFieldset.init('.js-next-fieldset-btn', '.js-prev-fieldset-btn');\r\n\t\tDuplicateForm.init('.js-dupicate-form-btn', '.js-remove-dupicated-form-btn');\r\n\t});\r\n})();","(function() {\r\n   'use strict';\r\n   \r\n   // animate when is visible\r\n   const animationOnVisible = {\r\n      animElements: null,\r\n      \r\n      scroll: function() {\r\n         const winBotEdge = window.pageYOffset + window.innerHeight;\r\n         \r\n         for (let i = 0; i < this.animElements.length; i++) {\r\n            const animElem = this.animElements[i],\r\n            animElemOffsetTop = animElem.getBoundingClientRect().top + window.pageYOffset,\r\n            animElemOffsetBot = animElemOffsetTop + animElem.offsetHeight;\r\n            \r\n            if (winBotEdge > animElemOffsetBot && window.pageYOffset < animElemOffsetTop) {\r\n               animElem.classList.add('animated');\r\n            } else {\r\n               animElem.classList.remove('animated');\r\n            }\r\n         }\r\n      },\r\n      \r\n      init: function() {\r\n         const animElements = document.querySelectorAll('.animate');\r\n         \r\n         if (animElements.length) {\r\n            this.animElements = animElements;\r\n            this.scroll();\r\n         }\r\n      }\r\n   };\r\n   \r\n   // document ready\r\n   document.addEventListener('DOMContentLoaded', function() {\r\n      animationOnVisible.init();\r\n      \r\n      if (animationOnVisible.animElements) {\r\n         window.addEventListener('scroll', animationOnVisible.scroll);\r\n      }\r\n   });\r\n})();"]}